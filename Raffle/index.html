<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>St. Sebastian's Church Raffle Winners</title>
    <style>
        body {
            background: #f9f9f9 url('homes-background.png') no-repeat center/cover;
            font-family: Arial, sans-serif;
            text-align: center;
        }
        header {
            padding: 20px;
            background: linear-gradient(135deg, #ffcc00, #ff6600);
            color: white;
            border-radius: 10px;
        }
        .prize-section {
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
        }
        .bronze { background: linear-gradient(135deg, #cd7f32, #964b00); }
        .silver { background: linear-gradient(135deg, #c0c0c0, #808080); }
        .gold { background: linear-gradient(135deg, #ffd700, #8b5a2b); }
        button {
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover { transform: scale(1.05); }
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .spinner {
            font-size: 36px;
            font-family: 'Brush Script MT', cursive;
            padding: 20px;
            border: 2px solid black;
            display: inline-block;
        }
        .hidden { display: none; }
    </style>
</head>
<body>
    <header>
        <img src="church-logo.png" alt="Church Logo">
        <h1>St. Sebastian's Church Raffle Winner Announcement</h1>
        <p>Address | Contact Info</p>
    </header>

    <section id="sponsor">
        <h2>Esteemed Sponsor</h2>
        <img src="sponsor-logo.png" alt="Sponsor Logo">
        <img src="proprietor-photo.jpg" alt="Proprietor">
        <p>Winners will receive homes in Sierra Greens at Sarjapur Road.</p>
        <button id="startRaffle">Start Raffle Draw</button>
    </section>

    <section id="raffleArea" class="hidden">
        <p id="statusMessage">Click a button to start drawing winners.</p>

        <div class="prize-section bronze">
            <h3>3rd Place Winner</h3>
            <div class="spinner" id="thirdSpinner">000000</div>
            <button id="thirdBtn">Generate 3rd Place Winner</button>
        </div>

        <div class="prize-section silver">
            <h3>2nd Place Winner</h3>
            <div class="spinner" id="secondSpinner">000000</div>
            <button id="secondBtn" disabled>Generate 2nd Place Winner</button>
        </div>

        <div class="prize-section gold">
            <h3>1st Place Winner</h3>
            <div class="spinner" id="firstSpinner">000000</div>
            <button id="firstBtn" disabled>Generate 1st Place Winner</button>
        </div>
    </section>

    <script>
        async function fetchWinners() {
            try {
                const response = await fetch('Winners.txt');
                const data = await response.text();
                return data.trim().split("\n"); // Assume each line contains a winning number
            } catch (error) {
                console.error("Error fetching winners:", error);
                return [];
            }
        }

        document.getElementById('startRaffle').addEventListener('click', async function () {
            document.getElementById('raffleArea').classList.remove('hidden');
            document.getElementById('statusMessage').textContent = "Loading winners...";
            window.winningNumbers = await fetchWinners(); // Load numbers globally
        });

        function generateWinner(spinnerId, nextButtonId, index) {
            let spinner = document.getElementById(spinnerId);
            let btn = nextButtonId ? document.getElementById(nextButtonId) : null;

            let interval = setInterval(() => {
                spinner.textContent = Math.floor(Math.random() * 999999).toString().padStart(6, '0');
            }, 50);

            setTimeout(() => {
                clearInterval(interval);
                spinner.textContent = window.winningNumbers[index] || "000000"; // Pick from loaded winners
                if (btn) btn.disabled = false;
            }, 3000);
        }

        document.getElementById('thirdBtn').addEventListener('click', () => {
            generateWinner('thirdSpinner', 'secondBtn', 0);
        });

        document.getElementById('secondBtn').addEventListener('click', () => {
            generateWinner('secondSpinner', 'firstBtn', 1);
        });

        document.getElementById('firstBtn').addEventListener('click', () => {
            generateWinner('firstSpinner', null, 2);
        });
    </script>
</body>
</html>
