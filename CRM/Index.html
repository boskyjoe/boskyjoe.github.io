<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Management CRM</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            @apply bg-gray-100 text-gray-800;
        }
        .app-container {
            /* This div wraps the entire main content and nav for potential future layout shifts for sidebar */
            @apply flex flex-col min-h-screen;
        }
        .main-content {
             @apply flex-1;
        }
        .container {
            @apply max-w-5xl mx-auto p-6 bg-white rounded-xl shadow-2xl my-8;
        }

        /* Nav Link Styling */
        .nav-link {
            @apply px-4 py-2 rounded-lg text-gray-700 hover:bg-indigo-100 hover:text-indigo-700 font-medium transition-all duration-200 ease-in-out text-sm relative;
            transform-style: preserve-3d; /* Enable 3D transformations for children */
        }
        .nav-link::before {
            content: '';
            @apply absolute inset-0 bg-gradient-to-br from-indigo-200 to-purple-200 rounded-lg opacity-0;
            transform: translateZ(-1px); /* Move slightly behind */
            transition: opacity 0.2s ease-in-out, transform 0.2s ease-in-out;
        }
        .nav-link:hover::before {
            @apply opacity-70;
            transform: translateZ(0); /* Bring forward on hover */
        }
        .nav-link span {
            @apply relative z-10; /* Keep text above pseudo-element */
        }
        .nav-link.active {
            @apply bg-indigo-600 text-white shadow-md;
        }
        .nav-link.active::before {
            @apply opacity-0; /* No 3D effect when active for cleaner look */
        }

        /* Section Styling */
        .section {
            @apply hidden;
        }
        .section.active {
            @apply block;
        }

        /* Form & Button Styling */
        .form-group {
            @apply mb-4;
        }
        .form-label {
            @apply block text-sm font-medium text-gray-700 mb-1;
        }
        .form-input {
            @apply block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 p-2.5 transition duration-150 ease-in-out;
        }
        .btn-primary {
            @apply px-6 py-2.5 bg-indigo-600 text-white font-semibold rounded-lg shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:-translate-y-0.5;
        }
        .btn-danger {
            @apply px-4 py-2 bg-red-500 text-white text-sm font-semibold rounded-lg hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-offset-2 transition duration-150 ease-in-out;
        }
        .btn-secondary {
            @apply px-4 py-2 bg-gray-400 text-white text-sm font-semibold rounded-lg hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:ring-offset-2 transition duration-150 ease-in-out;
        }

        /* Table Styling */
        table {
            @apply min-w-full divide-y divide-gray-200;
        }
        th {
            @apply px-4 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider rounded-t-lg;
        }
        td {
            @apply px-4 py-3 whitespace-nowrap text-sm text-gray-900;
        }

        /* Horizontal Scroll for Main Nav */
        .nav-scroll-container {
            @apply overflow-x-auto whitespace-nowrap scroll-smooth mb-6;
            -webkit-overflow-scrolling: touch;
            perspective: 1000px; /* Perspective for 3D effect */
        }
        .nav-scroll-container::-webkit-scrollbar {
            height: 8px;
        }
        .nav-scroll-container::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 4px;
        }
        .nav-scroll-container::-webkit-scrollbar-track {
            background-color: #f1f5f9;
        }

        /* Home Card Styling */
        .card {
            @apply bg-white p-8 rounded-xl shadow-lg text-center transform transition-transform duration-300 hover:scale-105;
        }

        /* Modal Styling */
        .modal-overlay {
            @apply fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 transition-opacity duration-300;
        }
        .modal-content {
            @apply bg-white p-8 rounded-xl shadow-2xl max-w-lg w-full transform transition-all duration-300 scale-95;
        }
        .modal-content.show {
             @apply scale-100 opacity-100;
        }
        .modal-content.hide {
             @apply scale-95 opacity-0;
        }
        .modal-close-btn {
            @apply absolute top-4 right-4 text-gray-500 hover:text-gray-700 text-2xl font-bold;
        }

        /* Hamburger Menu Styles */
        .hamburger {
            @apply w-8 h-6 flex flex-col justify-between cursor-pointer p-1;
            z-index: 100; /* Ensure it's above other content */
        }
        .hamburger-line {
            @apply w-full h-0.5 bg-gray-700 rounded-full transition-all duration-300 ease-in-out;
        }
        .hamburger.open .hamburger-line:nth-child(1) {
            transform: rotate(45deg) translate(5px, 5px);
        }
        .hamburger.open .hamburger-line:nth-child(2) {
            opacity: 0;
        }
        .hamburger.open .hamburger-line:nth-child(3) {
            transform: rotate(-45deg) translate(5px, -5px);
        }

        /* Sidebar Menu Styles */
        .sidebar {
            @apply fixed top-0 right-0 w-64 bg-white shadow-xl h-full overflow-y-auto transform translate-x-full transition-transform duration-300 ease-in-out z-40 p-6;
        }
        .sidebar.open {
            transform: translateX(0);
        }
        .sidebar-overlay {
            @apply fixed inset-0 bg-gray-900 bg-opacity-50 z-30 hidden transition-opacity duration-300;
        }
        .sidebar-overlay.open {
            @apply block;
            opacity: 1;
        }
        .sidebar-nav-link {
            @apply block px-4 py-2 text-gray-700 rounded-lg hover:bg-indigo-100 hover:text-indigo-700 transition duration-200 ease-in-out font-medium text-base mb-2;
        }

        /* 3D effect for main nav links on hover */
        .nav-link:hover {
            transform: rotateY(5deg); /* Slight rotation on Y-axis */
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <div class="container">
            <h1 class="text-4xl font-extrabold text-center text-indigo-700 mb-8">Event CRM Dashboard</h1>

            <!-- Main Navigation -->
            <nav class="bg-indigo-50 p-3 rounded-lg nav-scroll-container shadow-inner flex justify-between items-center">
                <div class="flex space-x-3">
                    <a href="#home" class="nav-link active" data-section="home"><span>Home</span></a>
                    <a href="#users" class="nav-link" data-section="users"><span>Users</span></a>
                    <a href="#contacts" class="nav-link" data-section="contacts"><span>Contacts</span></a>
                    <a href="#companies" class="nav-link" data-section="companies"><span>Companies</span></a>
                    <a href="#opportunities" class="nav-link" data-section="opportunities"><span>Opportunities</span></a>
                </div>
                <!-- Hamburger Icon -->
                <div id="hamburger" class="hamburger ml-4">
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                    <div class="hamburger-line"></div>
                </div>
            </nav>

            <!-- Main Content Sections -->
            <div class="main-content">
                <!-- Home Section -->
                <div id="home-section" class="section active p-6 bg-white rounded-xl shadow-md mt-6 flex items-center justify-center min-h-[400px]">
                    <div class="card bg-gradient-to-br from-indigo-500 to-purple-600 text-white p-10 rounded-2xl shadow-xl w-full max-w-md">
                        <h2 class="text-4xl font-extrabold mb-4">Welcome to Memory Maestro!</h2>
                        <p class="text-xl mb-6 opacity-90">Your all-in-one solution for managing every precious moment.</p>
                        <p class="text-lg opacity-80">Streamline your wedding, photoshoot, and video production workflows with ease.</p>
                    </div>
                </div>

                <!-- Users Section -->
                <div id="users-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Users Management</h2>
                    <button id="openAddUserModalBtn" class="btn-primary mb-6">Add New User</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">User ID</th>
                                    <th class="border-b">Username</th>
                                    <th class="border-b">Name</th>
                                    <th class="border-b">Email</th>
                                    <th class="border-b">Role</th>
                                    <th class="border-b">Skills</th>
                                    <th class="border-b">Phone</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noUsersMessage" class="text-center text-gray-500 mt-4 hidden">No users found.</p>
                </div>

                <!-- Contacts Section -->
                <div id="contacts-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Contacts Management</h2>
                    <button id="openAddContactModalBtn" class="btn-primary mb-6">Add New Contact</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">ID</th>
                                    <th class="border-b">Company ID</th>
                                    <th class="border-b">Owner ID</th>
                                    <th class="border-b">First Name</th>
                                    <th class="border-b">Last Name</th>
                                    <th class="border-b">Email</th>
                                    <th class="border-b">Phone</th>
                                    <th class="border-b">Title</th>
                                    <th class="border-b">Lead Source</th>
                                    <th class="border-b">Status</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="contactsTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noContactsMessage" class="text-center text-gray-500 mt-4 hidden">No contacts found.</p>
                </div>

                <!-- Companies Section -->
                <div id="companies-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Companies Management</h2>
                    <button id="openAddCompanyModalBtn" class="btn-primary mb-6">Add New Company</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">ID</th>
                                    <th class="border-b">Name</th>
                                    <th class="border-b">Website</th>
                                    <th class="border-b">Industry</th>
                                    <th class="border-b">Phone</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="companiesTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noCompaniesMessage" class="text-center text-gray-500 mt-4 hidden">No companies found.</p>
                </div>

                <!-- Opportunities Section -->
                <div id="opportunities-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Opportunities Management</h2>
                    <button id="openAddOpportunityModalBtn" class="btn-primary mb-6">Add New Opportunity</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">ID</th>
                                    <th class="border-b">Name</th>
                                    <th class="border-b">Amount</th>
                                    <th class="border-b">Stage</th>
                                    <th class="border-b">Exp. Close Date</th>
                                    <th class="border-b">Event Type</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="opportunitiesTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noOpportunitiesMessage" class="text-center text-gray-500 mt-4 hidden">No opportunities found.</p>
                </div>

                <!-- Events Section -->
                <div id="events-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Events Management</h2>
                    <button id="openAddEventModalBtn" class="btn-primary mb-6">Add New Event</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">ID</th>
                                    <th class="border-b">Opp. ID</th>
                                    <th class="border-b">Name</th>
                                    <th class="border-b">Type</th>
                                    <th class="border-b">Date</th>
                                    <th class="border-b">Location</th>
                                    <th class="border-b">Status</th>
                                    <th class="border-b">Price</th>
                                    <th class="border-b">Balance</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="eventsTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noEventsMessage" class="text-center text-gray-500 mt-4 hidden">No events found.</p>
                </div>

                <!-- Event Teams Section -->
                <div id="eventteams-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Event Teams Management</h2>
                    <button id="openAddEventTeamModalBtn" class="btn-primary mb-6">Add New Team Assignment</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">Event ID</th>
                                    <th class="border-b">User ID</th>
                                    <th class="border-b">Role Assigned</th>
                                    <th class="border-b">Assigned Date</th>
                                    <th class="border-b">Payment Status</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="eventTeamsTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noEventTeamsMessage" class="text-center text-gray-500 mt-4 hidden">No event teams assigned yet.</p>
                </div>

                <!-- Services Section -->
                <div id="services-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Services Management</h2>
                    <button id="openAddServiceModalBtn" class="btn-primary mb-6">Add New Service</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">ID</th>
                                    <th class="border-b">Name</th>
                                    <th class="border-b">Base Price</th>
                                    <th class="border-b">Is Package</th>
                                    <th class="border-b">Category</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="servicesTableBody" class="divide-y divide-gray-200"></tbody>
                        </table>
                    </div>
                    <p id="noServicesMessage" class="text-center text-gray-500 mt-4 hidden">No services found.</p>
                </div>

                <!-- Deliverables Section -->
                <div id="deliverables-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
                    <h2 class="text-3xl font-bold text-indigo-600 mb-6">Deliverables Management</h2>
                    <button id="openAddDeliverableModalBtn" class="btn-primary mb-6">Add New Deliverable</button>
                    <div class="overflow-x-auto">
                        <table class="table-auto w-full border-collapse">
                            <thead>
                                <tr>
                                    <th class="border-b">ID</th>
                                    <th class="border-b">Event ID</th>
                                    <th class="border-b">Name</th>
                                    <th class="border-b">Type</th>
                                    <th class="border-b">Status</th>
                                    <th class="border-b">Expected Date</th>
                                    <th class="border-b">Actual Date</th>
                                    <th class="border-b">Created</th>
                                    <th class="border-b">Updated</th>
                                    <th class="border-b">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="deliverablesTableBody" class="divide-y divide-gray-200"></tbody>
                </table>
            </div>
            <p id="noDeliverablesMessage" class="text-center text-gray-500 mt-4 hidden">No deliverables found.</p>
        </div>

        <!-- Activities Section -->
        <div id="activities-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
            <h2 class="text-3xl font-bold text-indigo-600 mb-6">Activities Log</h2>
            <button id="openAddActivityModalBtn" class="btn-primary mb-6">Add New Activity</button>
            <div class="overflow-x-auto">
                <table class="table-auto w-full border-collapse">
                    <thead>
                        <tr>
                            <th class="border-b">ID</th>
                            <th class="border-b">User ID</th>
                            <th class="border-b">Type</th>
                            <th class="border-b">Subject</th>
                            <th class="border-b">Date</th>
                            <th class="border-b">Time</th>
                            <th class="border-b">Status</th>
                            <th class="border-b">Due Date</th>
                            <th class="border-b">Contact ID</th>
                            <th class="border-b">Opp. ID</th>
                            <th class="border-b">Event ID</th>
                            <th class="border-b">Created</th>
                            <th class="border-b">Updated</th>
                            <th class="border-b">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="activitiesTableBody" class="divide-y divide-gray-200"></tbody>
                </table>
            </div>
            <p id="noActivitiesMessage" class="text-center text-gray-500 mt-4 hidden">No activities found.</p>
        </div>

        <!-- OpportunityContacts Section (Junction Table) -->
        <div id="opportunitycontacts-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
            <h2 class="text-3xl font-bold text-indigo-600 mb-6">Opportunity Contacts (Junction)</h2>
            <button id="openAddOpportunityContactModalBtn" class="btn-primary mb-6">Link Contact to Opportunity</button>
            <div class="overflow-x-auto">
                <table class="table-auto w-full border-collapse">
                    <thead>
                        <tr>
                            <th class="border-b">Opportunity ID</th>
                            <th class="border-b">Contact ID</th>
                            <th class="border-b">Role In Opportunity</th>
                            <th class="border-b">Created</th>
                            <th class="border-b">Updated</th>
                            <th class="border-b">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="opportunityContactsTableBody" class="divide-y divide-gray-200"></tbody>
                </table>
            </div>
            <p id="noOpportunityContactsMessage" class="text-center text-gray-500 mt-4 hidden">No opportunity contacts found.</p>
        </div>

        <!-- EventServices Section (Junction Table) -->
        <div id="eventservices-section" class="section p-6 bg-white rounded-xl shadow-md mt-6">
            <h2 class="text-3xl font-bold text-indigo-600 mb-6">Event Services (Junction)</h2>
            <button id="openAddEventServiceModalBtn" class="btn-primary mb-6">Assign Service to Event</button>
            <div class="overflow-x-auto">
                <table class="table-auto w-full border-collapse">
                    <thead>
                        <tr>
                            <th class="border-b">Event ID</th>
                            <th class="border-b">Service ID</th>
                            <th class="border-b">Agreed Price</th>
                            <th class="border-b">Quantity</th>
                            <th class="border-b">Created</th>
                            <th class="border-b">Updated</th>
                            <th class="border-b">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="eventServicesTableBody" class="divide-y divide-gray-200"></tbody>
                </table>
            </div>
            <p id="noEventServicesMessage" class="text-center text-gray-500 mt-4 hidden">No event services found.</p>
        </div>
        </div>
    </div>

    <!-- Modals for CRUD operations -->

    <!-- Generic Confirmation Modal -->
    <div id="confirmationModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="confirmModalTitle" class="text-2xl font-bold text-gray-800 mb-4">Confirm Action</h3>
            <p id="confirmModalMessage" class="mb-6 text-gray-700"></p>
            <div class="flex justify-end space-x-3">
                <button type="button" id="cancelConfirmBtn" class="btn-secondary">Cancel</button>
                <button type="button" id="confirmActionBtn" class="btn-danger">Confirm</button>
            </div>
        </div>
    </div>

    <!-- User Modal -->
    <div id="userModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="userModalTitle" class="text-2xl font-bold text-indigo-600 mb-4">Add New User</h3>
            <span class="modal-close-btn cursor-pointer" onclick="closeModal('user')">&times;</span>
            <form id="userForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="hidden" id="userFormIndex">
                <div class="form-group">
                    <label for="userFormUsername" class="form-label">Username:</label>
                    <input type="text" id="userFormUsername" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="userFormFirstName" class="form-label">First Name:</label>
                    <input type="text" id="userFormFirstName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="userFormLastName" class="form-label">Last Name:</label>
                    <input type="text" id="userFormLastName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="userFormEmail" class="form-label">Email:</label>
                    <input type="email" id="userFormEmail" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="userFormRole" class="form-label">Role:</label>
                    <input type="text" id="userFormRole" class="form-input" placeholder="e.g., Admin, Photographer">
                </div>
                <div class="form-group">
                    <label for="userFormSkills" class="form-label">Skills:</label>
                    <input type="text" id="userFormSkills" class="form-input" placeholder="e.g., Photography, Editing">
                </div>
                <div class="form-group">
                    <label for="userFormPhone" class="form-label">Phone:</label>
                    <input type="tel" id="userFormPhone" class="form-input">
                </div>
                <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
                    <button type="button" class="btn-secondary" onclick="closeModal('user')">Cancel</button>
                    <button type="submit" class="btn-primary">Save User</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="contactModalTitle" class="text-2xl font-bold text-indigo-600 mb-4">Add New Contact</h3>
            <span class="modal-close-btn cursor-pointer" onclick="closeModal('contact')">&times;</span>
            <form id="contactForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="hidden" id="contactFormIndex">
                <div class="form-group">
                    <label for="contactFormFirstName" class="form-label">First Name:</label>
                    <input type="text" id="contactFormFirstName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="contactFormLastName" class="form-label">Last Name:</label>
                    <input type="text" id="contactFormLastName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="contactFormEmail" class="form-label">Email:</label>
                    <input type="email" id="contactFormEmail" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="contactFormPhone" class="form-label">Phone:</label>
                    <input type="tel" id="contactFormPhone" class="form-input">
                </div>
                <div class="form-group">
                    <label for="contactFormCompanyID" class="form-label">Company ID (Optional):</label>
                    <input type="text" id="contactFormCompanyID" class="form-input" placeholder="e.g., COM001">
                </div>
                <div class="form-group">
                    <label for="contactFormOwnerUserID" class="form-label">Owner User ID:</label>
                    <input type="text" id="contactFormOwnerUserID" class="form-input" placeholder="e.g., USR001" required>
                </div>
                <div class="form-group">
                    <label for="contactFormTitle" class="form-label">Title:</label>
                    <input type="text" id="contactFormTitle" class="form-input" placeholder="e.g., Bride, Marketing Mgr">
                </div>
                <div class="form-group">
                    <label for="contactFormLeadSource" class="form-label">Lead Source:</label>
                    <input type="text" id="contactFormLeadSource" class="form-input" placeholder="e.g., Wedding Expo, Website">
                </div>
                <div class="form-group">
                    <label for="contactFormStatus" class="form-label">Status:</label>
                    <input type="text" id="contactFormStatus" class="form-input" placeholder="e.g., Lead, Customer">
                </div>
                 <div class="form-group">
                    <label for="contactFormLinkedInProfile" class="form-label">LinkedIn Profile:</label>
                    <input type="url" id="contactFormLinkedInProfile" class="form-input" placeholder="URL">
                </div>
                <div class="md:col-span-2 form-group">
                    <label for="contactFormNotes" class="form-label">Notes:</label>
                    <textarea id="contactFormNotes" class="form-input" rows="2"></textarea>
                </div>
                <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
                    <button type="button" class="btn-secondary" onclick="closeModal('contact')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Contact</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Company Modal -->
    <div id="companyModal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="companyModalTitle" class="text-2xl font-bold text-indigo-600 mb-4">Add New Company</h3>
            <span class="modal-close-btn cursor-pointer" onclick="closeModal('company')">&times;</span>
            <form id="companyForm" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="hidden" id="companyFormIndex">
                <div class="form-group">
                    <label for="companyFormName" class="form-label">Company Name:</label>
                    <input type="text" id="companyFormName" class="form-input" required>
                </div>
                <div class="form-group">
                    <label for="companyFormWebsite" class="form-label">Website:</label>
                    <input type="url" id="companyFormWebsite" class="form-input">
                </div>
                <div class="form-group">
                    <label for="companyFormIndustry" class="form-label">Industry:</label>
                    <input type="text" id="companyFormIndustry" class="form-input" placeholder="e.g., Venue, Planner">
                </div>
                <div class="form-group">
                    <label for="companyFormAddress" class="form-label">Address:</label>
                    <input type="text" id="companyFormAddress" class="form-input">
                </div>
                <div class="form-group">
                    <label for="companyFormCity" class="form-label">City:</label>
                    <input type="text" id="companyFormCity" class="form-input">
                </div>
                <div class="form-group">
                    <label for="companyFormState" class="form-label">State:</label>
                    <input type="text" id="companyFormState" class="form-input">
                </div>
                <div class="form-group">
                    <label for="companyFormZipCode" class="form-label">Zip Code:</label>
                    <input type="text" id="companyFormZipCode" class="form-input">
                </div>
                <div class="form-group">
                    <label for="companyFormPhone" class="form-label">Phone:</label>
                    <input type="tel" id="companyFormPhone" class="form-input">
                </div>
                 <div class="form-group">
                    <label for="companyFormAnnualRevenue" class="form-label">Annual Revenue (Optional):</label>
                    <input type="number" id="companyFormAnnualRevenue" class="form-input" step="0.01">
                </div>
                <div class="md:col-span-2 form-group">
                    <label for="companyFormDescription" class="form-label">Description:</label>
                    <textarea id="companyFormDescription" class="form-input" rows="2"></textarea>
                </div>
                <div class="md:col-span-2 flex justify-end space-x-3 mt-4">
                    <button type="button" class="btn-secondary" onclick="closeModal('company')">Cancel</button>
                    <button type="submit" class="btn-primary">Save Company</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Sidebar (Hamburger) Menu -->
    <div id="sidebar" class="sidebar">
        <h3 class="text-2xl font-bold text-indigo-600 mb-6">More Modules</h3>
        <nav class="flex flex-col">
            <a href="#events" class="sidebar-nav-link" data-section="events">Events</a>
            <a href="#eventteams" class="sidebar-nav-link" data-section="eventteams">Event Teams</a>
            <a href="#services" class="sidebar-nav-link" data-section="services">Services</a>
            <a href="#deliverables" class="sidebar-nav-link" data-section="deliverables">Deliverables</a>
            <a href="#activities" class="sidebar-nav-link" data-section="activities">Activities</a>
            <a href="#opportunitycontacts" class="sidebar-nav-link" data-section="opportunitycontacts">Opp. Contacts</a>
            <a href="#eventservices" class="sidebar-nav-link" data-section="eventservices">Event Services</a>
        </nav>
    </div>
    <!-- Sidebar Overlay -->
    <div id="sidebarOverlay" class="sidebar-overlay"></div>


    <script>
        // --- Data Storage (In-memory Simulation) ---
        // IMPORTANT: Data will be lost on page refresh without a backend server!
        let usersData = [];
        let contactsData = [];
        let companiesData = [];
        let opportunitiesData = [];
        let eventsData = [];
        let eventTeamsData = []; // Composite key [EventID, UserID]
        let servicesData = [];
        let deliverablesData = [];
        let activitiesData = [];
        let opportunityContactsData = []; // Composite key [OpportunityID, ContactID]
        let eventServicesData = []; // Composite key [EventID, ServiceID]

        // --- Helper Functions ---

        // Generates a simple sequential ID with a prefix
        function generateId(prefix, dataArray) {
            // Find the maximum number from existing IDs to ensure uniqueness
            const maxNum = dataArray.reduce((max, item) => {
                const idString = item[`${prefix}ID`] || '';
                const numPart = parseInt(idString.replace(prefix, ''));
                return !isNaN(numPart) && numPart > max ? numPart : max;
            }, 0);
            return `${prefix}${String(maxNum + 1).padStart(3, '0')}`;
        }

        // Formats a date string to a local date string (e.g., "7/20/2025")
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString();
        }

        // Formats a Date object (or ISO string) to a local date and time string (e.g., "7/20/2025, 10:30:00 AM")
        function formatDateTime(dateObject) {
            if (!dateObject) return '';
            const date = typeof dateObject === 'string' ? new Date(dateObject) : dateObject;
            if (isNaN(date.getTime())) { // Handle invalid dates gracefully
                return '';
            }
            return date.toLocaleString();
        }

        // Sets CreatedDate on new record and UpdatedDate on any modification
        function setTimestamps(obj, isNew = true) {
            const now = new Date();
            if (isNew) {
                obj.CreatedDate = now.toISOString(); // Store as ISO string for consistency
            }
            obj.UpdatedDate = now.toISOString(); // Store as ISO string for consistency
        }

        // --- Modal Functions (Generic and Specific) ---
        const confirmationModal = document.getElementById('confirmationModal');
        const confirmModalTitle = document.getElementById('confirmModalTitle');
        const confirmModalMessage = document.getElementById('confirmModalMessage');
        const confirmActionBtn = document.getElementById('confirmActionBtn');
        const cancelConfirmBtn = document.getElementById('cancelConfirmBtn');

        function showConfirmationModal(title, message, onConfirm) {
            confirmModalTitle.textContent = title;
            confirmModalMessage.textContent = message;
            confirmActionBtn.onclick = () => {
                onConfirm();
                hideConfirmationModal();
            };
            confirmationModal.classList.remove('hidden');
            confirmationModal.querySelector('.modal-content').classList.add('show');
        }

        function hideConfirmationModal() {
            const modalContent = confirmationModal.querySelector('.modal-content');
            modalContent.classList.remove('show');
            modalContent.classList.add('hide');
            setTimeout(() => {
                confirmationModal.classList.add('hidden');
                modalContent.classList.remove('hide');
            }, 300);
        }

        cancelConfirmBtn.addEventListener('click', hideConfirmationModal);


        // Register all modals here for the generic open/close function
        const modals = {
            user: { element: document.getElementById('userModal'), formId: 'userForm' },
            contact: { element: document.getElementById('contactModal'), formId: 'contactForm' },
            company: { element: document.getElementById('companyModal'), formId: 'companyForm' },
            // Add other modals here as they are implemented when their CRUD is full implemented
        };

        function openModal(modalType, isEdit = false, data = {}) {
            const modalInfo = modals[modalType];
            if (!modalInfo) return;

            const modal = modalInfo.element;
            const form = document.getElementById(modalInfo.formId);
            const titleElement = modal.querySelector(`#${modalType}ModalTitle`);

            if (isEdit) {
                titleElement.textContent = `Edit ${modalType.charAt(0).toUpperCase() + modalType.slice(1)}`;
                for (const key in data) {
                    // Normalize key name for form input IDs (e.g., ContactID -> contactFormContactId or contactFormCompanyID)
                    let inputId = `${modalType}Form${key}`;
                    // Special handling for common ID patterns if needed, for instance, `CompanyID` versus `CompanyId`
                    if (key.endsWith('ID') && key !== 'ID') { // check for CompanyID, UserID etc. but not generic ID
                        inputId = `${modalType}Form${key.replace('ID', 'Id')}`;
                    }

                    const input = form.querySelector(`#${inputId}`);
                    if (input) {
                        if (input.type === 'checkbox') {
                            input.checked = data[key];
                        } else {
                            input.value = data[key];
                        }
                    }
                }
                form.querySelector(`#${modalType}FormIndex`).value = data._index;
            } else {
                titleElement.textContent = `Add New ${modalType.charAt(0).toUpperCase() + modalType.slice(1)}`;
                form.reset();
                form.querySelector(`#${modalType}FormIndex`).value = '';
            }

            modal.classList.remove('hidden');
            modal.querySelector('.modal-content').classList.add('show');
        }

        function closeModal(modalType) {
            const modalInfo = modals[modalType];
            if (!modalInfo) return;

            const modal = modalInfo.element;
            const modalContent = modal.querySelector('.modal-content');
            modalContent.classList.remove('show');
            modalContent.classList.add('hide');
            setTimeout(() => {
                modal.classList.add('hidden');
                modalContent.classList.remove('hide');
            }, 300);
        }

        // --- Navigation Logic ---
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.section');
        const hamburger = document.getElementById('hamburger');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');
        const sidebarNavLinks = document.querySelectorAll('.sidebar-nav-link');

        function showSection(sectionId) {
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(`${sectionId}-section`).classList.add('active');

            // Update active state for main nav links
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === sectionId) {
                    link.classList.add('active');
                }
            });
            // Update active state for sidebar nav links
            sidebarNavLinks.forEach(link => {
                link.classList.remove('active');
                if (link.dataset.section === sectionId) {
                    link.classList.add('active');
                }
            });


            // Re-render data for the newly active section
            switch (sectionId) {
                case 'home': break;
                case 'users': renderUsers(); break;
                case 'contacts': renderContacts(); break;
                case 'companies': renderCompanies(); break;
                case 'opportunities': renderOpportunities(); break;
                case 'events': renderEvents(); break;
                case 'eventteams': renderEventTeams(); break;
                case 'services': renderServices(); break;
                case 'deliverables': renderDeliverables(); break;
                case 'activities': renderActivities(); break;
                case 'opportunitycontacts': renderOpportunityContacts(); break;
                case 'eventservices': renderEventServices(); break;
            }
        }

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = e.target.dataset.section || e.target.closest('.nav-link').dataset.section; // Handle clicks on span inside link
                showSection(sectionId);
                window.location.hash = sectionId;
            });
        });

        // Hamburger menu toggle
        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('open');
            sidebar.classList.toggle('open');
            sidebarOverlay.classList.toggle('open');
        });

        // Close sidebar when clicking outside or on a link
        sidebarOverlay.addEventListener('click', () => {
            hamburger.classList.remove('open');
            sidebar.classList.remove('open');
            sidebarOverlay.classList.remove('open');
        });

        sidebarNavLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = e.target.dataset.section;
                showSection(sectionId);
                window.location.hash = sectionId;
                // Close sidebar after clicking a link
                hamburger.classList.remove('open');
                sidebar.classList.remove('open');
                sidebarOverlay.classList.remove('open');
            });
        });


        window.addEventListener('hashchange', () => {
            const sectionIdFromHash = window.location.hash.substring(1);
            if (sectionIdFromHash) {
                showSection(sectionIdFromHash);
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            const initialSection = window.location.hash ? window.location.hash.substring(1) : 'home';
            showSection(initialSection);
        });

        // --- Entity Specific Functions (Fully Implemented with Modals: Users, Contacts, Companies) ---

        // --- Users Functions ---
        const openAddUserModalBtn = document.getElementById('openAddUserModalBtn');
        const userForm = document.getElementById('userForm');
        const usersTableBody = document.getElementById('usersTableBody');
        const noUsersMessage = document.getElementById('noUsersMessage');

        openAddUserModalBtn.addEventListener('click', () => {
            openModal('user', false);
        });

        function renderUsers() {
            usersTableBody.innerHTML = '';
            if (usersData.length === 0) {
                noUsersMessage.classList.remove('hidden');
                return;
            } else {
                noUsersMessage.classList.add('hidden');
            }
            usersData.forEach((user, index) => {
                const row = usersTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${user.UserID}</td>
                    <td class="border-b">${user.Username}</td>
                    <td class="border-b">${user.FirstName} ${user.LastName}</td>
                    <td class="border-b">${user.Email}</td>
                    <td class="border-b">${user.Role || ''}</td>
                    <td class="border-b">${user.Skills || ''}</td>
                    <td class="border-b">${user.Phone || ''}</td>
                    <td class="border-b">${formatDateTime(user.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(user.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editUser(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteUser(${index})">Delete</button>
                    </td>
                `;
            });
        }
        userForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formIndex = document.getElementById('userFormIndex').value;
            const userData = {
                Username: document.getElementById('userFormUsername').value,
                FirstName: document.getElementById('userFormFirstName').value,
                LastName: document.getElementById('userFormLastName').value,
                Email: document.getElementById('userFormEmail').value,
                Role: document.getElementById('userFormRole').value,
                Skills: document.getElementById('userFormSkills').value,
                Phone: document.getElementById('userFormPhone').value,
            };

            if (formIndex === '') {
                userData.UserID = generateId('USR', usersData);
                setTimestamps(userData, true);
                usersData.push(userData);
            } else {
                const originalUser = usersData[parseInt(formIndex)];
                Object.assign(originalUser, userData);
                setTimestamps(originalUser, false);
            }
            renderUsers();
            closeModal('user');
        });

        function editUser(index) {
            const userToEdit = { ...usersData[index], _index: index };
            openModal('user', true, userToEdit);
        }
        function deleteUser(index) {
            showConfirmationModal(
                'Delete User',
                `Are you sure you want to delete user: ${usersData[index].Username}?`,
                () => {
                    usersData.splice(index, 1);
                    renderUsers();
                }
            );
        }

        // --- Contacts Functions (Full Modal Implementation) ---
        const openAddContactModalBtn = document.getElementById('openAddContactModalBtn');
        const contactForm = document.getElementById('contactForm');
        const contactsTableBody = document.getElementById('contactsTableBody');
        const noContactsMessage = document.getElementById('noContactsMessage');

        openAddContactModalBtn.addEventListener('click', () => {
            openModal('contact', false);
        });

        function renderContacts() {
            contactsTableBody.innerHTML = '';
            if (contactsData.length === 0) {
                noContactsMessage.classList.remove('hidden');
                return;
            } else {
                noContactsMessage.classList.add('hidden');
            }
            contactsData.forEach((contact, index) => {
                const row = contactsTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${contact.ContactID}</td>
                    <td class="border-b">${contact.CompanyID || ''}</td>
                    <td class="border-b">${contact.OwnerUserID || ''}</td>
                    <td class="border-b">${contact.FirstName}</td>
                    <td class="border-b">${contact.LastName}</td>
                    <td class="border-b">${contact.Email}</td>
                    <td class="border-b">${contact.Phone || ''}</td>
                    <td class="border-b">${contact.Title || ''}</td>
                    <td class="border-b">${contact.LeadSource || ''}</td>
                    <td class="border-b">${contact.Status || ''}</td>
                    <td class="border-b">${formatDateTime(contact.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(contact.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editContact(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteContact(${index})">Delete</button>
                    </td>
                `;
            });
        }

        contactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formIndex = document.getElementById('contactFormIndex').value;
            const contactData = {
                FirstName: document.getElementById('contactFormFirstName').value,
                LastName: document.getElementById('contactFormLastName').value,
                Email: document.getElementById('contactFormEmail').value,
                Phone: document.getElementById('contactFormPhone').value,
                CompanyID: document.getElementById('contactFormCompanyID').value,
                OwnerUserID: document.getElementById('contactFormOwnerUserID').value,
                Title: document.getElementById('contactFormTitle').value,
                LinkedInProfile: document.getElementById('contactFormLinkedInProfile').value,
                LeadSource: document.getElementById('contactFormLeadSource').value,
                Status: document.getElementById('contactFormStatus').value,
                Notes: document.getElementById('contactFormNotes').value,
            };

            if (formIndex === '') {
                contactData.ContactID = generateId('CON', contactsData);
                setTimestamps(contactData, true);
                contactsData.push(contactData);
            } else {
                const originalContact = contactsData[parseInt(formIndex)];
                Object.assign(originalContact, contactData);
                setTimestamps(originalContact, false);
            }
            renderContacts();
            closeModal('contact');
        });

        function editContact(index) {
            const contactToEdit = { ...contactsData[index], _index: index };
            openModal('contact', true, contactToEdit);
        }

        function deleteContact(index) {
            showConfirmationModal(
                'Delete Contact',
                `Are you sure you want to delete contact: ${contactsData[index].FirstName} ${contactsData[index].LastName}?`,
                () => {
                    contactsData.splice(index, 1);
                    renderContacts();
                }
            );
        }

        // --- Companies Functions (Full Modal Implementation) ---
        const openAddCompanyModalBtn = document.getElementById('openAddCompanyModalBtn');
        const companyForm = document.getElementById('companyForm');
        const companiesTableBody = document.getElementById('companiesTableBody');
        const noCompaniesMessage = document.getElementById('noCompaniesMessage');

        openAddCompanyModalBtn.addEventListener('click', () => {
            openModal('company', false);
        });

        function renderCompanies() {
            companiesTableBody.innerHTML = '';
            if (companiesData.length === 0) {
                noCompaniesMessage.classList.remove('hidden');
                return;
            } else {
                noCompaniesMessage.classList.add('hidden');
            }
            companiesData.forEach((company, index) => {
                const row = companiesTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${company.CompanyID}</td>
                    <td class="border-b">${company.CompanyName}</td>
                    <td class="border-b">${company.Website || ''}</td>
                    <td class="border-b">${company.Industry || ''}</td>
                    <td class="border-b">${company.Phone || ''}</td>
                    <td class="border-b">${formatDateTime(company.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(company.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editCompany(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteCompany(${index})">Delete</button>
                    </td>
                `;
            });
        }
        companyForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const formIndex = document.getElementById('companyFormIndex').value;
            const companyData = {
                CompanyName: document.getElementById('companyFormName').value,
                Website: document.getElementById('companyFormWebsite').value,
                Industry: document.getElementById('companyFormIndustry').value,
                Address: document.getElementById('companyFormAddress').value,
                City: document.getElementById('companyFormCity').value,
                State: document.getElementById('companyFormState').value,
                ZipCode: document.getElementById('companyFormZipCode').value,
                Phone: document.getElementById('companyFormPhone').value,
                AnnualRevenue: document.getElementById('companyFormAnnualRevenue').value ? parseFloat(document.getElementById('companyFormAnnualRevenue').value) : null,
                Description: document.getElementById('companyFormDescription').value,
            };

            if (formIndex === '') {
                companyData.CompanyID = generateId('COM', companiesData);
                setTimestamps(companyData, true);
                companiesData.push(companyData);
            } else {
                const originalCompany = companiesData[parseInt(formIndex)];
                Object.assign(originalCompany, companyData);
                setTimestamps(originalCompany, false);
            }
            renderCompanies();
            closeModal('company');
        });
        function editCompany(index) {
            const companyToEdit = { ...companiesData[index], _index: index };
            openModal('company', true, companyToEdit);
        }
        function deleteCompany(index) {
            showConfirmationModal(
                'Delete Company',
                `Are you sure you want to delete company: ${companiesData[index].CompanyName}?`,
                () => {
                    companiesData.splice(index, 1);
                    renderCompanies();
                }
            );
        }

        // --- Opportunities Functions ---
        const openAddOpportunityModalBtn = document.getElementById('openAddOpportunityModalBtn');
        const addOpportunityForm = document.getElementById('addOpportunityForm');
        const opportunitiesTableBody = document.getElementById('opportunitiesTableBody');
        const noOpportunitiesMessage = document.getElementById('noOpportunitiesMessage');

        openAddOpportunityModalBtn.addEventListener('click', () => {
            alert('Add Opportunity Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Opportunities
        });

        function renderOpportunities() {
            opportunitiesTableBody.innerHTML = '';
            if (opportunitiesData.length === 0) {
                noOpportunitiesMessage.classList.remove('hidden');
                return;
            } else {
                noOpportunitiesMessage.classList.add('hidden');
            }
            opportunitiesData.forEach((opportunity, index) => {
                const row = opportunitiesTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${opportunity.OpportunityID}</td>
                    <td class="border-b">${opportunity.OpportunityName}</td>
                    <td class="border-b">${opportunity.Amount ? `$${opportunity.Amount.toFixed(2)}` : ''}</td>
                    <td class="border-b">${opportunity.Stage || ''}</td>
                    <td class="border-b">${formatDate(opportunity.ExpectedCloseDate) || ''}</td>
                    <td class="border-b">${opportunity.EventType || ''}</td>
                    <td class="border-b">${formatDateTime(opportunity.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(opportunity.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editOpportunity(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteOpportunity(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addOpportunityForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newOpportunity = {
                OpportunityID: generateId('OPP', opportunitiesData),
                CompanyID: document.getElementById('opportunityCompanyID').value,
                OwnerUserID: document.getElementById('opportunityOwnerUserID').value,
                OpportunityName: document.getElementById('opportunityName').value,
                Amount: document.getElementById('opportunityAmount').value ? parseFloat(document.getElementById('opportunityAmount').value) : null,
                Stage: document.getElementById('opportunityStage').value,
                ExpectedCloseDate: document.getElementById('opportunityExpectedCloseDate').value,
                Probability: document.getElementById('opportunityProbability').value ? parseInt(document.getElementById('opportunityProbability').value) : null,
                Type: document.getElementById('opportunityType').value,
                EventType: document.getElementById('opportunityEventType').value,
                EventDateRequested: document.getElementById('opportunityEventDateRequested').value,
                EventLocationProposed: document.getElementById('opportunityEventLocationProposed').value,
                Description: document.getElementById('opportunityDescription').value,
            };
            setTimestamps(newOpportunity);
            opportunitiesData.push(newOpportunity);
            renderOpportunities();
            addOpportunityForm.reset();
        });
        function editOpportunity(index) {
            alert(`Editing Opportunity: ${opportunitiesData[index].OpportunityName}`);
            setTimestamps(opportunitiesData[index], false);
            renderOpportunities();
        }
        function deleteOpportunity(index) {
            showConfirmationModal(
                'Delete Opportunity',
                `Are you sure you want to delete opportunity: ${opportunitiesData[index].OpportunityName}?`,
                () => {
                    opportunitiesData.splice(index, 1);
                    renderOpportunities();
                }
            );
        }

        // --- Events Functions ---
        const openAddEventModalBtn = document.getElementById('openAddEventModalBtn');
        const addEventForm = document.getElementById('addEventForm');
        const eventsTableBody = document.getElementById('eventsTableBody');
        const noEventsMessage = document.getElementById('noEventsMessage');

        openAddEventModalBtn.addEventListener('click', () => {
            alert('Add Event Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Events
        });

        function renderEvents() {
            eventsTableBody.innerHTML = '';
            if (eventsData.length === 0) {
                noEventsMessage.classList.remove('hidden');
                return;
            } else {
                noEventsMessage.classList.add('hidden');
            }
            eventsData.forEach((event, index) => {
                const row = eventsTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${event.EventID}</td>
                    <td class="border-b">${event.OpportunityID || ''}</td>
                    <td class="border-b">${event.EventName}</td>
                    <td class="border-b">${event.EventType || ''}</td>
                    <td class="border-b">${formatDate(event.EventDate) || ''}</td>
                    <td class="border-b">${event.EventLocation || ''}</td>
                    <td class="border-b">${event.Status || ''}</td>
                    <td class="border-b">${event.TotalAgreedPrice ? `$${event.TotalAgreedPrice.toFixed(2)}` : ''}</td>
                    <td class="border-b">${event.BalanceDue ? `$${event.BalanceDue.toFixed(2)}` : ''}</td>
                    <td class="border-b">${formatDateTime(event.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(event.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editEvent(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteEvent(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addEventForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newEvent = {
                EventID: generateId('EVT', eventsData),
                OpportunityID: document.getElementById('eventOpportunityID').value,
                EventName: document.getElementById('eventName').value,
                EventType: document.getElementById('eventType').value,
                EventDate: document.getElementById('eventDate').value,
                EventLocation: document.getElementById('eventLocation').value,
                ClientNotes: document.getElementById('eventClientNotes').value,
                InternalNotes: document.getElementById('eventInternalNotes').value,
                Status: document.getElementById('eventStatus').value,
                ContractSignedDate: document.getElementById('eventContractSignedDate').value,
                TotalAgreedPrice: document.getElementById('eventTotalAgreedPrice').value ? parseFloat(document.getElementById('eventTotalAgreedPrice').value) : null,
                BalanceDue: document.getElementById('eventBalanceDue').value ? parseFloat(document.getElementById('eventBalanceDue').value) : null,
                FinalPaymentDueDate: document.getElementById('eventFinalPaymentDueDate').value,
            };
            setTimestamps(newEvent);
            eventsData.push(newEvent);
            renderEvents();
            addEventForm.reset();
        });
        function editEvent(index) {
            alert(`Editing Event: ${eventsData[index].EventName}`);
            setTimestamps(eventsData[index], false);
            renderEvents();
        }
        function deleteEvent(index) {
            showConfirmationModal(
                'Delete Event',
                `Are you sure you want to delete event: ${eventsData[index].EventName}?`,
                () => {
                    eventsData.splice(index, 1);
                    renderEvents();
                }
            );
        }

        // --- Event Teams Functions ---
        const openAddEventTeamModalBtn = document.getElementById('openAddEventTeamModalBtn');
        const addEventTeamForm = document.getElementById('addEventTeamForm');
        const eventTeamsTableBody = document.getElementById('eventTeamsTableBody');
        const noEventTeamsMessage = document.getElementById('noEventTeamsMessage');

        openAddEventTeamModalBtn.addEventListener('click', () => {
            alert('Add Event Team Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Event Teams
        });

        function renderEventTeams() {
            eventTeamsTableBody.innerHTML = '';
            if (eventTeamsData.length === 0) {
                noEventTeamsMessage.classList.remove('hidden');
                return;
            } else {
                noEventTeamsMessage.classList.add('hidden');
            }
            eventTeamsData.forEach((team, index) => {
                const row = eventTeamsTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${team.EventID}</td>
                    <td class="border-b">${team.UserID}</td>
                    <td class="border-b">${team.RoleAssigned || ''}</td>
                    <td class="border-b">${formatDate(team.AssignedDate) || ''}</td>
                    <td class="border-b">${team.PaymentStatus || ''}</td>
                    <td class="border-b">${formatDateTime(team.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(team.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editEventTeam(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteEventTeam(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addEventTeamForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newEventTeam = {
                EventID: document.getElementById('eventTeamEventID').value,
                UserID: document.getElementById('eventTeamUserID').value,
                RoleAssigned: document.getElementById('eventTeamRoleAssigned').value,
                AssignedDate: document.getElementById('eventTeamAssignedDate').value,
                PaymentStatus: document.getElementById('eventTeamPaymentStatus').value,
                Notes: document.getElementById('eventTeamNotes').value,
            };
            setTimestamps(newEventTeam);
            eventTeamsData.push(newEventTeam);
            renderEventTeams();
            addEventTeamForm.reset();
        });
        function editEventTeam(index) {
            alert(`Editing Event Team: Event ID ${eventTeamsData[index].EventID}, User ID ${eventTeamsData[index].UserID}`);
            setTimestamps(eventTeamsData[index], false);
            renderEventTeams();
        }
        function deleteEventTeam(index) {
            showConfirmationModal(
                'Delete Event Team',
                `Are you sure you want to delete assignment for Event ID ${eventTeamsData[index].EventID} and User ID ${eventTeamsData[index].UserID}?`,
                () => {
                    eventTeamsData.splice(index, 1);
                    renderEventTeams();
                }
            );
        }

        // --- Services Functions ---
        const openAddServiceModalBtn = document.getElementById('openAddServiceModalBtn');
        const addServiceForm = document.getElementById('addServiceForm');
        const servicesTableBody = document.getElementById('servicesTableBody');
        const noServicesMessage = document.getElementById('noServicesMessage');

        openAddServiceModalBtn.addEventListener('click', () => {
            alert('Add Service Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Services
        });

        function renderServices() {
            servicesTableBody.innerHTML = '';
            if (servicesData.length === 0) {
                noServicesMessage.classList.remove('hidden');
                return;
            } else {
                noServicesMessage.classList.add('hidden');
            }
            servicesData.forEach((service, index) => {
                const row = servicesTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${service.ServiceID}</td>
                    <td class="border-b">${service.ServiceName}</td>
                    <td class="border-b">${service.BasePrice ? `$${service.BasePrice.toFixed(2)}` : ''}</td>
                    <td class="border-b">${service.IsPackage ? 'Yes' : 'No'}</td>
                    <td class="border-b">${service.Category || ''}</td>
                    <td class="border-b">${formatDateTime(service.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(service.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editService(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteService(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addServiceForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newService = {
                ServiceID: generateId('SRV', servicesData),
                ServiceName: document.getElementById('serviceName').value,
                Description: document.getElementById('serviceDescription').value,
                BasePrice: document.getElementById('serviceBasePrice').value ? parseFloat(document.getElementById('serviceBasePrice').value) : null,
                IsPackage: document.getElementById('serviceIsPackage').checked,
                Category: document.getElementById('serviceCategory').value,
            };
            setTimestamps(newService);
            servicesData.push(newService);
            renderServices();
            addServiceForm.reset();
        });
        function editService(index) {
            alert(`Editing Service: ${servicesData[index].ServiceName}`);
            setTimestamps(servicesData[index], false);
            renderServices();
        }
        function deleteService(index) {
            showConfirmationModal(
                'Delete Service',
                `Are you sure you want to delete service: ${servicesData[index].ServiceName}?`,
                () => {
                    servicesData.splice(index, 1);
                    renderServices();
                }
            );
        }

        // --- Deliverables Functions ---
        const openAddDeliverableModalBtn = document.getElementById('openAddDeliverableModalBtn');
        const addDeliverableForm = document.getElementById('addDeliverableForm');
        const deliverablesTableBody = document.getElementById('deliverablesTableBody');
        const noDeliverablesMessage = document.getElementById('noDeliverablesMessage');

        openAddDeliverableModalBtn.addEventListener('click', () => {
            alert('Add Deliverable Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Deliverables
        });

        function renderDeliverables() {
            deliverablesTableBody.innerHTML = '';
            if (deliverablesData.length === 0) {
                noDeliverablesMessage.classList.remove('hidden');
                return;
            } else {
                noDeliverablesMessage.classList.add('hidden');
            }
            deliverablesData.forEach((deliverable, index) => {
                const row = deliverablesTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${deliverable.DeliverableID}</td>
                    <td class="border-b">${deliverable.EventID || ''}</td>
                    <td class="border-b">${deliverable.DeliverableName}</td>
                    <td class="border-b">${deliverable.Type || ''}</td>
                    <td class="border-b">${deliverable.Status || ''}</td>
                    <td class="border-b">${formatDate(deliverable.ExpectedDeliveryDate) || ''}</td>
                    <td class="border-b">${formatDate(deliverable.ActualDeliveryDate) || ''}</td>
                    <td class="border-b">${formatDateTime(deliverable.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(deliverable.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editDeliverable(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteDeliverable(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addDeliverableForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newDeliverable = {
                DeliverableID: generateId('DEL', deliverablesData),
                EventID: document.getElementById('deliverableEventID').value,
                DeliverableName: document.getElementById('deliverableName').value,
                Type: document.getElementById('deliverableType').value,
                Status: document.getElementById('deliverableStatus').value,
                ExpectedDeliveryDate: document.getElementById('deliverableExpectedDeliveryDate').value,
                ActualDeliveryDate: document.getElementById('deliverableActualDeliveryDate').value,
                Notes: document.getElementById('deliverableNotes').value,
            };
            setTimestamps(newDeliverable);
            deliverablesData.push(newDeliverable);
            renderDeliverables();
            addDeliverableForm.reset();
        });
        function editDeliverable(index) {
            alert(`Editing Deliverable: ${deliverablesData[index].DeliverableName}`);
            setTimestamps(deliverablesData[index], false);
            renderDeliverables();
        }
        function deleteDeliverable(index) {
            showConfirmationModal(
                'Delete Deliverable',
                `Are you sure you want to delete deliverable: ${deliverablesData[index].DeliverableName}?`,
                () => {
                    deliverablesData.splice(index, 1);
                    renderDeliverables();
                }
            );
        }

        // --- Activities Functions ---
        const openAddActivityModalBtn = document.getElementById('openAddActivityModalBtn');
        const addActivityForm = document.getElementById('addActivityForm');
        const activitiesTableBody = document.getElementById('activitiesTableBody');
        const noActivitiesMessage = document.getElementById('noActivitiesMessage');

        openAddActivityModalBtn.addEventListener('click', () => {
            alert('Add Activity Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Activities
        });

        function renderActivities() {
            activitiesTableBody.innerHTML = '';
            if (activitiesData.length === 0) {
                noActivitiesMessage.classList.remove('hidden');
                return;
            } else {
                noActivitiesMessage.classList.add('hidden');
            }
            activitiesData.forEach((activity, index) => {
                const row = activitiesTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${activity.ActivityID}</td>
                    <td class="border-b">${activity.UserID || ''}</td>
                    <td class="border-b">${activity.ActivityType}</td>
                    <td class="border-b">${activity.Subject}</td>
                    <td class="border-b">${formatDate(activity.Date) || ''}</td>
                    <td class="border-b">${activity.Time || ''}</td>
                    <td class="border-b">${activity.Status || ''}</td>
                    <td class="border-b">${formatDate(activity.DueDate) || ''}</td>
                    <td class="border-b">${activity.ContactID || ''}</td>
                    <td class="border-b">${activity.OpportunityID || ''}</td>
                    <td class="border-b">${activity.EventID || ''}</td>
                    <td class="border-b">${formatDateTime(activity.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(activity.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editActivity(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteActivity(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addActivityForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newActivity = {
                ActivityID: generateId('ACT', activitiesData),
                UserID: document.getElementById('activityUserID').value,
                ActivityType: document.getElementById('activityType').value,
                Subject: document.getElementById('activitySubject').value,
                Date: document.getElementById('activityDate').value,
                Time: document.getElementById('activityTime').value,
                Status: document.getElementById('activityStatus').value,
                DueDate: document.getElementById('activityDueDate').value,
                ContactID: document.getElementById('activityContactID').value,
                OpportunityID: document.getElementById('activityOpportunityID').value,
                EventID: document.getElementById('activityEventID').value,
                Description: document.getElementById('activityDescription').value,
            };
            setTimestamps(newActivity);
            activitiesData.push(newActivity);
            renderActivities();
            addActivityForm.reset();
        });
        function editActivity(index) {
            alert(`Editing Activity: ${activitiesData[index].Subject}`);
            setTimestamps(activitiesData[index], false);
            renderActivities();
        }
        function deleteActivity(index) {
            showConfirmationModal(
                'Delete Activity',
                `Are you sure you want to delete activity: ${activitiesData[index].Subject}?`,
                () => {
                    activitiesData.splice(index, 1);
                    renderActivities();
                }
            );
        }

        // --- OpportunityContacts Functions (Junction Table) ---
        const openAddOpportunityContactModalBtn = document.getElementById('openAddOpportunityContactModalBtn');
        const addOpportunityContactForm = document.getElementById('addOpportunityContactForm');
        const opportunityContactsTableBody = document.getElementById('opportunityContactsTableBody');
        const noOpportunityContactsMessage = document.getElementById('noOpportunityContactsMessage');

        openAddOpportunityContactModalBtn.addEventListener('click', () => {
            alert('Link Opportunity Contact Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Opportunity Contacts
        });

        function renderOpportunityContacts() {
            opportunityContactsTableBody.innerHTML = '';
            if (opportunityContactsData.length === 0) {
                noOpportunityContactsMessage.classList.remove('hidden');
                return;
            } else {
                noOpportunityContactsMessage.classList.add('hidden');
            }
            opportunityContactsData.forEach((oc, index) => {
                const row = opportunityContactsTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${oc.OpportunityID}</td>
                    <td class="border-b">${oc.ContactID}</td>
                    <td class="border-b">${oc.RoleInOpportunity || ''}</td>
                    <td class="border-b">${formatDateTime(oc.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(oc.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editOpportunityContact(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteOpportunityContact(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addOpportunityContactForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newOppContact = {
                OpportunityID: document.getElementById('oppContactOpportunityID').value,
                ContactID: document.getElementById('oppContactContactID').value,
                RoleInOpportunity: document.getElementById('oppContactRoleInOpportunity').value,
            };
            setTimestamps(newOppContact);
            opportunityContactsData.push(newOppContact);
            renderOpportunityContacts();
            addOpportunityContactForm.reset();
        });
        function editOpportunityContact(index) {
            alert(`Editing Opportunity Contact: Opportunity ID ${opportunityContactsData[index].OpportunityID}, Contact ID ${opportunityContactsData[index].ContactID}`);
            setTimestamps(opportunityContactsData[index], false);
            renderOpportunityContacts();
        }
        function deleteOpportunityContact(index) {
            showConfirmationModal(
                'Delete Opportunity Contact',
                `Are you sure you want to delete link for Opportunity ID ${opportunityContactsData[index].OpportunityID} and Contact ID ${opportunityContactsData[index].ContactID}?`,
                () => {
                    opportunityContactsData.splice(index, 1);
                    renderOpportunityContacts();
                }
            );
        }

        // --- EventServices Functions (Junction Table) ---
        const openAddEventServiceModalBtn = document.getElementById('openAddEventServiceModalBtn');
        const addEventServiceForm = document.getElementById('addEventServiceForm');
        const eventServicesTableBody = document.getElementById('eventServicesTableBody');
        const noEventServicesMessage = document.getElementById('noEventServicesMessage');

        openAddEventServiceModalBtn.addEventListener('click', () => {
            alert('Assign Event Service Modal would open here. (Not yet implemented with modal)');
            // TODO: Implement a modal for adding/editing Event Services
        });

        function renderEventServices() {
            eventServicesTableBody.innerHTML = '';
            if (eventServicesData.length === 0) {
                noEventServicesMessage.classList.remove('hidden');
                return;
            } else {
                noEventServicesMessage.classList.add('hidden');
            }
            eventServicesData.forEach((es, index) => {
                const row = eventServicesTableBody.insertRow();
                row.innerHTML = `
                    <td class="border-b">${es.EventID}</td>
                    <td class="border-b">${es.ServiceID}</td>
                    <td class="border-b">${es.AgreedPrice ? `$${es.AgreedPrice.toFixed(2)}` : ''}</td>
                    <td class="border-b">${es.Quantity || ''}</td>
                    <td class="border-b">${formatDateTime(es.CreatedDate)}</td>
                    <td class="border-b">${formatDateTime(es.UpdatedDate)}</td>
                    <td class="border-b">
                        <button class="btn-secondary mr-2" onclick="editEventService(${index})">Edit</button>
                        <button class="btn-danger" onclick="deleteEventService(${index})">Delete</button>
                    </td>
                `;
            });
        }
        addEventServiceForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const newEventService = {
                EventID: document.getElementById('eventServiceEventID').value,
                ServiceID: document.getElementById('eventServiceServiceID').value,
                AgreedPrice: document.getElementById('eventServiceAgreedPrice').value ? parseFloat(document.getElementById('eventServiceAgreedPrice').value) : null,
                Quantity: document.getElementById('eventServiceQuantity').value ? parseInt(document.getElementById('eventServiceQuantity').value) : null,
                ServiceNotes: document.getElementById('eventServiceServiceNotes').value,
            };
            setTimestamps(newEventService);
            eventServicesData.push(newEventService);
            renderEventServices();
            addEventServiceForm.reset();
        });
        function editEventService(index) {
            alert(`Editing Event Service: Event ID ${eventServicesData[index].EventID}, Service ID ${eventServicesData[index].ServiceID}`);
            setTimestamps(eventServicesData[index], false);
            renderEventServices();
        }
        function deleteEventService(index) {
            showConfirmationModal(
                'Delete Event Service',
                `Are you sure you want to delete assignment for Event ID ${eventServicesData[index].EventID} and Service ID ${eventServicesData[index].ServiceID}?`,
                () => {
                    eventServicesData.splice(index, 1);
                    renderEventServices();
                }
            );
        }

        // --- Initial Data Load (Simulated JSON from "text files") ---
        window.onload = function() {
            usersData = [
                { UserID: 'USR001', Username: 'john_photo', FirstName: 'John', LastName: 'Doe', Email: 'john.d@example.com', Role: 'Lead Photographer', Skills: 'Photography, Drone', Phone: '555-1001', CreatedDate: '2024-01-01T08:00:00Z', UpdatedDate: '2024-01-01T08:00:00Z' },
                { UserID: 'USR002', Username: 'jane_video', FirstName: 'Jane', LastName: 'Smith', Email: 'jane.s@example.com', Role: 'Lead Videographer', Skills: 'Videography, Editing', Phone: '555-1002', CreatedDate: '2024-01-05T09:00:00Z', UpdatedDate: '2024-01-05T09:00:00Z' }
            ];
            contactsData = [
                { ContactID: 'CON001', CompanyID: '', OwnerUserID: 'USR001', FirstName: 'Alice', LastName: 'Wonderland', Email: 'alice@example.com', Phone: '555-2001', Title: 'Bride', LinkedInProfile: '', LeadSource: 'Wedding Expo', Status: 'Client', LastContactDate: '2024-06-20', Notes: '', CreatedDate: '2024-02-10T10:00:00Z', UpdatedDate: '2024-06-20T14:30:00Z' },
                { ContactID: 'CON002', CompanyID: 'COM001', OwnerUserID: 'USR002', FirstName: 'Bob', LastName: 'Builder', Email: 'bob@venue.com', Phone: '555-2002', Title: 'Event Manager', LinkedInProfile: '', LeadSource: 'Referral', Status: 'Partner', LastContactDate: '2024-07-18', Notes: 'Contact for Grand Ballroom', CreatedDate: '2024-03-05T11:00:00Z', UpdatedDate: '2024-07-18T09:15:00Z' }
            ];
            companiesData = [
                { CompanyID: 'COM001', CompanyName: 'Grand Ballroom Events', Website: 'www.grandballroom.com', Industry: 'Venue', Address: '123 Main St', City: 'Anytown', State: 'CA', ZipCode: '90210', Phone: '555-3001', AnnualRevenue: 1000000.00, Description: 'Luxury wedding venue', CreatedDate: '2024-01-20T09:00:00Z', UpdatedDate: '2024-01-20T09:00:00Z' }
            ];
            opportunitiesData = [
                { OpportunityID: 'OPP001', CompanyID: '', OwnerUserID: 'USR001', OpportunityName: 'Alice & Ben Wedding', Amount: 8500.00, Stage: 'Booked', ExpectedCloseDate: '2024-03-01', Probability: 100, Type: 'New Business', EventType: 'Wedding', EventDateRequested: '2025-08-15', EventLocationProposed: 'Grand Ballroom', Description: 'Full day photo+video package', CreatedDate: '2024-02-15T10:00:00Z', UpdatedDate: '2024-03-01T15:00:00Z' }
            ];
            eventsData = [
                { EventID: 'EVT001', OpportunityID: 'OPP001', EventName: 'Alice & Ben Wedding', EventType: 'Wedding', EventDate: '2025-08-15', EventLocation: 'Grand Ballroom', ClientNotes: 'Must get drone shots of venue.', InternalNotes: 'Coordinate with planner Sarah.', Status: 'Scheduled', ContractSignedDate: '2024-03-01', TotalAgreedPrice: 8500.00, BalanceDue: 4250.00, FinalPaymentDueDate: '2025-07-15', CreatedDate: '2024-03-01T16:00:00Z', UpdatedDate: '2024-03-01T16:00:00Z' }
            ];
            eventTeamsData = [
                { EventID: 'EVT001', UserID: 'USR001', RoleAssigned: 'Lead Photographer', AssignedDate: '2025-08-15', PaymentStatus: 'Due', Notes: 'Needs drone certification', CreatedDate: '2024-03-05T09:00:00Z', UpdatedDate: '2024-03-05T09:00:00Z' },
                { EventID: 'EVT001', UserID: 'USR002', RoleAssigned: 'Lead Videographer', AssignedDate: '2025-08-15', PaymentStatus: 'Due', Notes: 'Cinematic style requested', CreatedDate: '2024-03-05T09:10:00Z', UpdatedDate: '2024-03-05T09:10:00Z' }
            ];
            servicesData = [
                { ServiceID: 'SRV001', ServiceName: 'Wedding Photography (Full Day)', Description: '8 hours of photography coverage', BasePrice: 4000.00, IsPackage: true, Category: 'Photography', CreatedDate: '2024-01-10T09:00:00Z', UpdatedDate: '2024-01-10T09:00:00Z' },
                { ServiceID: 'SRV002', ServiceName: 'Wedding Videography (Highlight)', Description: '5-7 minute highlight reel', BasePrice: 3000.00, IsPackage: false, Category: 'Videography', CreatedDate: '2024-01-10T09:05:00Z', UpdatedDate: '2024-01-10T09:05:00Z' }
            ];
            deliverablesData = [
                { DeliverableID: 'DEL001', EventID: 'EVT001', DeliverableName: 'Wedding Highlight Video', Type: 'Digital Files', Status: 'In Production', ExpectedDeliveryDate: '2025-09-15', ActualDeliveryDate: '', Notes: 'Client chose "Perfect Day" song.', CreatedDate: '2025-08-16T10:00:00Z', UpdatedDate: '2025-08-16T10:00:00Z' }
            ];
            activitiesData = [
                { ActivityID: 'ACT001', ContactID: 'CON001', OpportunityID: 'OPP001', EventID: 'EVT001', UserID: 'USR001', ActivityType: 'Meeting', Subject: 'Wedding Day Briefing', Date: '2025-08-01', Time: '14:00', Description: 'Discussed timeline and key shots with Alice.', Status: 'Completed', DueDate: '', CreatedDate: '2025-07-25T10:00:00Z', UpdatedDate: '2025-08-01T15:00:00Z' }
            ];
            opportunityContactsData = [
                { OpportunityID: 'OPP001', ContactID: 'CON001', RoleInOpportunity: 'Bride', CreatedDate: '2024-02-15T10:00:00Z', UpdatedDate: '2024-02-15T10:00:00Z' }
            ];
            eventServicesData = [
                { EventID: 'EVT001', ServiceID: 'SRV001', AgreedPrice: 4000.00, Quantity: 1, ServiceNotes: '8 hours coverage', CreatedDate: '2024-03-01T16:00:00Z', UpdatedDate: '2024-03-01T16:00:00Z' },
                { EventID: 'EVT001', ServiceID: 'SRV002', AgreedPrice: 3000.00, Quantity: 1, ServiceNotes: 'Highlight reel only', CreatedDate: '2024-03-01T16:05:00Z', UpdatedDate: '2024-03-01T16:05:00Z' }
            ];

            // Initial render of the active section (defaulting to 'home')
            const initialSection = window.location.hash ? window.location.hash.substring(1) : 'home';
            showSection(initialSection);
        };
    </script>
</body>
</html>
