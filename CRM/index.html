<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShutterSync CRM System</title>
    <!-- External Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for 'Inter' -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght=400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome for Icons (Google icon) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- External CSS file -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body class="flex flex-col items-center">
    <!-- Top Navigation Bar -->
    <nav class="bg-blue-600 text-white p-4 w-full shadow-lg">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <!-- Brand/Logo -->
            <div class="text-2xl font-bold rounded-md py-1 px-3 bg-blue-700">ShutterSync</div>

            <!-- Desktop Menu Items -->
            <div class="hidden md:flex space-x-6">
                <a href="javascript:void(0)" data-section="home" class="hover:text-blue-200 transition-colors duration-200">Home</a>
                <a href="javascript:void(0)" data-section="crm-section" class="hover:text-blue-200 transition-colors duration-200">User</a>
                <a href="javascript:void(0)" data-section="customers-section" class="hover:text-blue-200 transition-colors duration-200">Customers</a>
                <a href="javascript:void(0)" data-section="crm-section" class="hover:text-blue-200 transition-colors duration-200">Services</a>
                <a href="javascript:void(0)" data-section="crm-section" class="hover:text-blue-200 transition-colors duration-200">Opportunities</a>
                <a href="javascript:void(0)" data-section="events-section" class="hover:text-blue-200 transition-colors duration-200">Events</a>
            </div>

            <!-- User Status & Login/Logout Buttons -->
            <div class="flex items-center space-x-3">
                <!-- Google Login Button in Nav Bar -->
                <button id="navGoogleLoginButton" class="bg-blue-500 hover:bg-blue-700 text-white p-2 rounded-full shadow-md text-sm hidden" title="Login with Google">
                    <i class="fab fa-google"></i> <span class="hidden md:inline">Login</span>
                </button>
                <span id="userIdDisplay" class="text-sm text-gray-200 hidden md:block"></span>
                <button id="logoutButton" class="bg-red-500 hover:bg-red-600 text-white py-1 px-3 rounded-md text-sm shadow-md hidden">Logout</button>
            </div>

            <!-- Hamburger Menu for Mobile -->
            <div class="md:hidden flex items-center">
                <button id="mobileMenuButton" class="text-white hover:text-blue-200 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-4 6h4"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Menu (hidden by default) -->
        <div id="mobileMenu" class="hidden md:hidden bg-blue-700 mt-2 rounded-lg py-2 w-full">
            <a href="javascript:void(0)" data-section="home" class="block px-4 py-2 text-sm hover:bg-blue-600 transition-colors duration-200">Home</a>
            <a href="javascript:void(0)" data-section="crm-section" class="block px-4 py-2 text-sm hover:bg-blue-600 transition-colors duration-200">User</a>
            <a href="javascript:void(0)" data-section="customers-section" class="block px-4 py-2 text-sm hover:bg-blue-600 transition-colors duration-200">Customers</a>
            <a href="javascript:void(0)" data-section="crm-section" class="block px-4 py-2 text-sm hover:bg-blue-600 transition-colors duration-200">Services</a>
            <a href="javascript:void(0)" data-section="crm-section" class="block px-4 py-2 text-sm hover:bg-blue-600 transition-colors duration-200">Opportunities</a>
            <a href="javascript:void(0)" data-section="events-section" class="block px-4 py-2 text-sm hover:bg-blue-600 transition-colors duration-200">Events</a>
            <div class="border-t border-blue-600 my-2"></div>
            <!-- Mobile Google Login Button (redundant if main nav button is responsive) -->
            <!-- For simplicity, we'll hide mobile specific login button and rely on navGoogleLoginButton responsiveness -->
            <button id="mobileLogoutButton" class="block text-left w-full px-4 py-2 text-sm text-red-300 hover:bg-red-600 hover:text-white transition-colors duration-200 hidden">Logout</button>
            <span id="mobileUserIdDisplay" class="block px-4 py-2 text-xs text-gray-400"></span>
        </div>
    </nav>

    <main class="w-full flex flex-col items-center p-5 max-w-7xl">
        <!-- Login/Registration Section (Now hidden by default and simplified) -->
        <section id="auth-section" class="container hidden"> <!-- Added 'hidden' class here -->
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Welcome to ShutterSync</h2>
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200 max-w-md mx-auto">
                <p class="text-center text-gray-700">Please log in to access the CRM features.</p>
                <!-- Removed email/password form -->
                <!-- The Google Login button is now in the nav bar -->
            </div>
        </section>

        <!-- CRM Description Section (Hidden by default, shown after login) -->
        <section id="home" class="container bg-gradient-to-r from-blue-500 to-indigo-600 text-white text-center py-16 mb-8 shadow-xl hidden">
            <h1 class="text-5xl font-extrabold mb-4 animate-fadeIn">Welcome to ShutterSync CRM</h1>
            <p class="text-xl leading-relaxed max-w-3xl mx-auto opacity-90 animate-fadeIn delay-100">
                A simple, effective, and free solution to manage your valuable contacts, track interactions,
                and nurture relationships for your non-profit organization. Accessible anywhere, anytime.
            </p>
            <div class="mt-8">
                <a href="javascript:void(0)" data-section="crm-section" class="bg-white text-blue-600 py-3 px-8 rounded-full text-lg font-semibold shadow-lg hover:bg-blue-100 transition-all duration-300 transform hover:scale-105">
                    Get Started
                </a>
            </div>
        </section>

        <!-- Main CRM Functionality Section (Contacts - Initially hidden) -->
        <section id="crm-section" class="container hidden">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Contact Management</h2>
                <div class="flex flex-col md:flex-row gap-3 w-full md:w-auto">
                    <button id="collectionToggleButton" class="secondary w-full md:w-auto">Switch to Public Contacts</button>
                </div>
            </div>

            <!-- Add/Edit Contact Form -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm mb-8 border border-gray-200">
                <h3 id="contactFormTitle" class="text-2xl font-semibold text-gray-800 mb-6">Add New Contact</h3>
                <form id="contactForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="contactName" class="block text-sm font-medium text-gray-700 mb-1">Name</label>
                        <input type="text" id="contactName" placeholder="John Doe" required>
                    </div>
                    <div>
                        <label for="contactEmail" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                        <input type="email" id="contactEmail" placeholder="john.doe@example.com">
                    </div>
                    <div>
                        <label for="contactPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone</label>
                        <input type="tel" id="contactPhone" placeholder="(123) 456-7890">
                    </div>
                    <div class="md:col-span-2">
                        <label for="contactNotes" class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
                        <textarea id="contactNotes" rows="4" placeholder="Important details about this contact..."></textarea>
                    </div>
                    <div class="md:col-span-2 flex justify-end">
                        <button type="submit" id="submitButton" class="primary w-full md:w-auto" disabled>Add Contact</button>
                    </div>
                </form>
            </div>

            <!-- Contact List -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
                <h3 class="text-2xl font-semibold text-gray-800 mb-6">Your Contacts</h3>
                <div id="contactList" class="grid grid-cols-1 gap-6">
                    <!-- Contacts will be dynamically loaded here -->
                    <p class="text-gray-500 text-center">Loading contacts...</p>
                </div>
            </div>
        </section>

        <!-- Customers CRUD Section -->
        <section id="customers-section" class="container hidden">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Customer Management</h2>
                <!-- Removed companyCollectionToggleButton as per request -->
            </div>

            <!-- Add/Edit Customer Form -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm mb-8 border border-gray-200">
                <h3 id="customerFormTitle" class="text-2xl font-semibold text-gray-800 mb-6">Add New Customer</h3>
                <form id="customerForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Customer ID will be system generated and displayed during edit -->
                    <div id="customerIdDisplayGroup" class="hidden">
                        <label for="customerIdDisplay" class="block text-sm font-medium text-gray-700 mb-1">Customer ID</label>
                        <span id="customerIdDisplay" class="block w-full border border-gray-200 bg-gray-100 rounded-md py-2 px-3 text-sm text-gray-600"></span>
                    </div>

                    <div>
                        <label for="customerType" class="block text-sm font-medium text-gray-700 mb-1">Customer Type <span class="text-red-500">*</span></label>
                        <select id="customerType" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm" required>
                            <option value="">Select Type</option>
                            <option value="Individual" selected>Individual</option> <!-- Defaulted to Individual -->
                            <option value="Company">Company</option>
                        </select>
                    </div>
                    <!-- Conditional fields based on Customer Type -->
                    <div id="individualFields"> <!-- Removed hidden, will be shown by default -->
                        <label for="customerFirstName" class="block text-sm font-medium text-gray-700 mb-1">First Name <span class="text-red-500">*</span></label>
                        <input type="text" id="customerFirstName" placeholder="John">
                    </div>
                    <div id="lastNameField"> <!-- Removed hidden, will be shown by default -->
                        <label for="customerLastName" class="block text-sm font-medium text-gray-700 mb-1">Last Name <span class="text-red-500">*</span></label>
                        <input type="text" id="customerLastName" placeholder="Doe">
                    </div>
                    <div id="companyNameField" class="hidden">
                        <label for="customerCompanyName" class="block text-sm font-medium text-gray-700 mb-1">Company Name <span class="text-red-500">*</span></label>
                        <input type="text" id="customerCompanyName" placeholder="Acme Corporation">
                    </div>

                    <!-- Common Fields -->
                    <div>
                        <label for="customerEmail" class="block text-sm font-medium text-gray-700 mb-1">Email <span class="text-red-500">*</span></label>
                        <input type="email" id="customerEmail" placeholder="email@example.com" required>
                    </div>
                    <div>
                        <label for="customerPhone" class="block text-sm font-medium text-gray-700 mb-1">Phone <span class="text-red-500">*</span></label>
                        <input type="tel" id="customerPhone" placeholder="(123) 456-7890" required>
                    </div>
                    <div>
                        <label for="customerAddress" class="block text-sm font-medium text-gray-700 mb-1">Address <span class="text-red-500">*</span></label>
                        <input type="text" id="customerAddress" placeholder="123 Main St" required>
                    </div>
                    <div>
                        <label for="customerCity" class="block text-sm font-medium text-gray-700 mb-1">City <span class="text-red-500">*</span></label>
                        <input type="text" id="customerCity" placeholder="Anytown" required>
                    </div>
                    <div>
                        <label for="customerState" class="block text-sm font-medium text-gray-700 mb-1">State <span class="text-red-500">*</span></label>
                        <input type="text" id="customerState" placeholder="CA" required>
                    </div>
                    <div>
                        <label for="customerZipCode" class="block text-sm font-medium text-gray-700 mb-1">Zip Code <span class="text-red-500">*</span></label>
                        <input type="text" id="customerZipCode" placeholder="90210" required>
                    </div>
                    <!-- Industry Field based on Type -->
                    <div id="individualIndustryGroup"> <!-- Removed hidden, will be shown by default -->
                        <label for="customerIndustryInput" class="block text-sm font-medium text-gray-700 mb-1">Industry <span class="text-red-500">*</span></label>
                        <input type="text" id="customerIndustryInput" placeholder="e.g., Photography">
                    </div>
                    <div id="companyIndustryGroup" class="hidden">
                        <label for="customerIndustrySelect" class="block text-sm font-medium text-gray-700 mb-1">Industry <span class="text-red-500">*</span></label>
                        <select id="customerIndustrySelect" class="w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                            <option value="">Select Industry</option>
                            <option value="Technology">Technology</option>
                            <option value="Finance">Finance</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Retail">Retail</option>
                            <option value="Manufacturing">Manufacturing</option>
                            <option value="Education">Education</option>
                            <option value="Non-Profit">Non-Profit</option>
                            <option value="Consulting">Consulting</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div>
                        <label for="customerSince" class="block text-sm font-medium text-gray-700 mb-1">Customer Since <span class="text-red-500">*</span></label>
                        <input type="date" id="customerSince" required>
                    </div>
                    <div class="md:col-span-2">
                        <label for="customerDescription" class="block text-sm font-medium text-gray-700 mb-1">Description</label>
                        <textarea id="customerDescription" rows="3" placeholder="Brief description of the customer..."></textarea>
                    </div>
                    <div class="md:col-span-2 flex justify-end">
                        <button type="submit" id="submitCustomerButton" class="primary w-full md:w-auto" disabled>Add Customer</button>
                    </div>
                </form>
            </div>

            <!-- Customer List -->
            <div class="bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200">
                <h3 class="text-2xl font-semibold text-gray-800 mb-6">Your Customers</h3>
                <div id="customerList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 min-h-[200px] items-start">
                    <!-- Customers will be dynamically loaded here -->
                    <p class="text-gray-500 text-center col-span-full">No customers found. Add one above!</p>
                </div>
            </div>
        </section>


        <!-- Events Section (Initially hidden) -->
        <section id="events-section" class="container hidden">
            <h2 class="text-3xl font-bold text-gray-800">Events</h2>
            <p class="text-gray-600 mt-4">This section will contain details about your upcoming and past events.</p>
            <!-- Content for Events will go here -->
        </section>
    </main>

    <!-- Modal Container -->
    <div id="modalContainer"></div>

    <!-- External JavaScript file -->
    <script type="module" src="js/script.js"></script>
</body>
</html>
