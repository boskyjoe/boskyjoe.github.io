<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShutterSync CRM</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body class="bg-gray-100 font-inter">

    <!-- Modal Container -->
    <div id="modalContainer"></div>

    <!-- Header -->
    <header class="bg-white shadow-md py-4 px-6 flex items-center justify-between">
        <div class="flex items-center">
            <h1 class="text-2xl font-bold text-gray-800">ShutterSync CRM</h1>
        </div>
        <!-- Desktop Navigation -->
        <nav class="hidden md:flex space-x-6">
            <a href="#" data-section="home" class="text-gray-600 hover:text-blue-600 font-medium">Home</a>
            <a href="#" data-section="customers-section" class="text-gray-600 hover:text-blue-600 font-medium">Customers</a>
            <a href="#" data-section="opportunities-section" class="text-gray-600 hover:text-blue-600 font-medium">Opportunities</a>
            <a href="#" data-section="events-section" class="text-gray-600 hover:text-blue-600 font-medium">Events</a>
            <!-- Admin Dropdown for Desktop -->
            <div class="relative group" id="desktopAdminMenu">
                <button class="text-gray-600 hover:text-blue-600 font-medium focus:outline-none flex items-center">
                    Admin
                    <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="absolute hidden group-hover:block bg-white shadow-lg rounded-md mt-2 py-1 w-48 z-10">
                    <a href="#" data-section="admin-country-mapping-section" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Country/State Mapping</a>
                    <a href="#" data-section="currency-management-section" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Currency Management</a>
                    <a href="#" data-section="users-management-section" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Users Management</a>
                </div>
            </div>
        </nav>
        <!-- User Actions (Desktop) -->
        <div class="hidden md:flex items-center space-x-4">
            <span id="userIdDisplay" class="text-gray-600 text-sm hidden"></span>
            <button id="navGoogleLoginButton" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md transition duration-150 ease-in-out">Sign in with Google</button>
            <button id="logoutButton" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-md hidden transition duration-150 ease-in-out">Logout</button>
        </div>
        <!-- Mobile Menu Button -->
        <div class="md:hidden">
            <button id="mobileMenuButton" class="text-gray-600 focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </div>
    </header>

    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobileMenu" class="md:hidden bg-white shadow-lg pb-4 transition-all ease-in-out duration-300 max-h-0 overflow-hidden">
        <nav class="flex flex-col px-6 py-2 space-y-2">
            <a href="#" data-section="home" class="block text-gray-600 hover:text-blue-600 font-medium py-2">Home</a>
            <a href="#" data-section="customers-section" class="block text-gray-600 hover:text-blue-600 font-medium py-2">Customers</a>
            <a href="#" data-section="opportunities-section" class="block text-gray-600 hover:text-blue-600 font-medium py-2">Opportunities</a>
            <a href="#" data-section="events-section" class="block text-gray-600 hover:text-blue-600 font-medium py-2">Events</a>
            <!-- Admin Dropdown for Mobile -->
            <div class="relative" id="mobileAdminMenu">
                <button class="text-gray-600 hover:text-blue-600 font-medium py-2 w-full text-left focus:outline-none flex items-center justify-between">
                    Admin
                    <svg class="ml-1 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div class="flex flex-col pl-4 mt-1 space-y-1">
                    <a href="#" data-section="admin-country-mapping-section" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Country/State Mapping</a>
                    <a href="#" data-section="currency-management-section" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Currency Management</a>
                    <a href="#" data-section="users-management-section" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Users Management</a>
                </div>
            </div>
            <!-- Mobile User Actions -->
            <span id="mobileUserIdDisplay" class="text-gray-600 text-sm py-2 hidden"></span>
            <button id="mobileLogoutButton" class="bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-md hidden transition duration-150 ease-in-out">Logout</button>
        </nav>
    </div>

    <!-- Main Content Area -->
    <main class="py-8">
        <!-- Home Section -->
        <section id="home" class="container mx-auto px-4 text-center">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Welcome to ShutterSync CRM</h2>
            <p class="text-lg text-gray-600 mb-8">Your all-in-one solution for managing customers, opportunities, and events.</p>
            <div class="flex flex-col items-center justify-center space-y-4">
                <button id="googleLoginButton" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-lg text-lg transition duration-150 ease-in-out">
                    Sign In with Google to Get Started
                </button>
            </div>
        </section>

        <!-- Customers Section -->
        <section id="customers-section" class="hidden container mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow p-6 mb-8 max-w-4xl mx-auto">
                <h2 id="customerFormTitle" class="text-2xl font-bold mb-4 text-gray-800">Add New Customer</h2>

                <div id="customerIdDisplayGroup" class="mb-4 hidden">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Customer ID (Read Only):</label>
                    <p id="customerIdDisplay" class="text-lg font-semibold text-gray-900"></p>
                </div>

                <form id="customerForm" class="space-y-4">
                    <!-- Customer Type -->
                    <div>
                        <label for="customerType" class="block text-gray-700 text-sm font-bold mb-2">Customer Type <span class="text-red-500">*</span></label>
                        <select id="customerType" name="customerType" required
                            class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                            <option value="Individual">Individual</option>
                            <option value="Company">Company</option>
                        </select>
                    </div>

                    <!-- Individual Fields -->
                    <div id="individualFields" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="customerFirstName" class="block text-gray-700 text-sm font-bold mb-2">First Name <span class="text-red-500">*</span></label>
                            <input type="text" id="customerFirstName" name="firstName" placeholder="John" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        </div>
                        <div>
                            <label for="customerLastName" class="block text-gray-700 text-sm font-bold mb-2">Last Name <span class="text-red-500">*</span></label>
                            <input type="text" id="customerLastName" name="lastName" placeholder="Doe" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        </div>
                    </div>

                    <!-- Company Name Field -->
                    <div id="companyNameField" class="hidden">
                        <label for="customerCompanyName" class="block text-gray-700 text-sm font-bold mb-2">Company Name <span class="text-red-500">*</span></label>
                        <input type="text" id="customerCompanyName" name="companyName" placeholder="Acme Corp"
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="customerEmail" class="block text-gray-700 text-sm font-bold mb-2">Email <span class="text-red-500">*</span></label>
                            <input type="email" id="customerEmail" name="email" placeholder="john.doe@example.com" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        </div>
                        <div>
                            <label for="customerPhone" class="block text-gray-700 text-sm font-bold mb-2">Phone <span class="text-red-500">*</span></label>
                            <input type="tel" id="customerPhone" name="phone" placeholder="+1 (555) 123-4567" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        </div>
                    </div>

                    <!-- Address Fields -->
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">Address <span class="text-red-500">*</span></label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-2">
                            <div>
                                <select id="customerCountry" name="country" required
                                    class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                                    <option value="">Select Country</option>
                                </select>
                            </div>
                            <div>
                                <input type="text" id="customerAddress" name="address" placeholder="123 Main St" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                            </div>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div>
                                <input type="text" id="customerCity" name="city" placeholder="Anytown" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                            </div>
                            <div>
                                <select id="customerState" name="state" required
                                    class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white" disabled>
                                    <option value="">Select State/Province</option>
                                </select>
                            </div>
                            <div>
                                <input type="text" id="customerZipCode" name="zipCode" placeholder="12345" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                            </div>
                        </div>
                        <p id="addressValidationMessage" class="text-red-500 text-xs italic mt-2 hidden">Please fill in all address fields.</p>
                    </div>


                    <!-- Industry Fields (Conditional) -->
                    <div id="individualIndustryGroup" class="hidden">
                        <label for="customerIndustryInput" class="block text-gray-700 text-sm font-bold mb-2">Industry <span class="text-red-500">*</span></label>
                        <input type="text" id="customerIndustryInput" name="industry" placeholder="Technology, Healthcare, etc."
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>
                    <div id="companyIndustryGroup" class="hidden">
                        <label for="customerIndustrySelect" class="block text-gray-700 text-sm font-bold mb-2">Industry <span class="text-red-500">*</span></label>
                        <select id="customerIndustrySelect" name="industry"
                            class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                            <option value="">Select Industry</option>
                            <option value="Technology">Technology</option>
                            <option value="Healthcare">Healthcare</option>
                            <option value="Finance">Finance</option>
                            <option value="Retail">Retail</option>
                            <option value="Manufacturing">Manufacturing</option>
                            <option value="Education">Education</option>
                            <option value="Government">Government</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <div>
                        <label for="customerSince" class="block text-gray-700 text-sm font-bold mb-2">Customer Since <span class="text-red-500">*</span></label>
                        <input type="date" id="customerSince" name="customerSince" required
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>
                    <div>
                        <label for="customerDescription" class="block text-gray-700 text-sm font-bold mb-2">Description</label>
                        <textarea id="customerDescription" name="description" rows="3" placeholder="Any additional notes about the customer..."
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                    </div>
                    <div class="flex items-center justify-between">
                        <button type="submit" id="submitCustomerButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                            Add Customer
                        </button>
                        <button type="button" id="resetCustomerFormButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                            Clear Form
                        </button>
                    </div>
                </form>
            </div>

            <!-- Existing Customers List -->
            <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-xl font-bold mb-4 text-gray-800">Existing Customers</h3>
                <div class="data-grid-header grid grid-cols-[100px_minmax(150px,_1.5fr)_1.5fr_1fr_1.5fr_1fr_0.8fr_1.5fr] gap-x-4 py-2 border-b border-gray-200 font-semibold text-gray-600 text-sm">
                    <div class="px-2">Customer ID</div>
                    <div class="px-2">Name</div>
                    <div class="px-2">Email</div>
                    <div class="px-2 hidden md:block">Phone</div>
                    <div class="px-2 hidden lg:block">Address</div>
                    <div class="px-2 hidden lg:block">Industry</div>
                    <div class="px-2 hidden sm:block">Since</div>
                    <div class="px-2 text-right">Actions</div>
                </div>
                <div id="customerList" class="data-grid-body divide-y divide-gray-100">
                    <!-- Customer rows will be loaded here by JavaScript -->
                    <p class="text-gray-500 text-center col-span-full py-4">No customers loaded.</p>
                </div>
            </div>
        </section>

        <!-- Opportunities Section -->
        <section id="opportunities-section" class="hidden container mx-auto px-4 py-8">
            <h2 class="text-2xl font-bold mb-6 text-gray-800 text-center">Opportunities Management</h2>

            <div id="opportunity-view-container" class="flex flex-col md:flex-row gap-6">

                <!-- Left Panel (Full Form / Summary) -->
                <div id="opportunity-left-panel" class="flex-1 md:w-3/5 md:flex-none">

                    <!-- Opportunity Form Card (initially shown for adding new) -->
                    <div id="opportunity-full-form-view" class="bg-white rounded-lg shadow p-6 mb-6">
                        <h3 id="opportunityFormTitle" class="text-xl font-bold mb-4 text-gray-800">Add New Opportunity</h3>

                        <div id="opportunityIdDisplayGroup" class="mb-4 hidden">
                            <label class="block text-gray-700 text-sm font-bold mb-2">Opportunity ID (Read Only):</label>
                            <p id="opportunityIdDisplay" class="text-lg font-semibold text-gray-900"></p>
                        </div>

                        <form id="opportunityForm" class="space-y-4">
                            <div>
                                <label for="opportunityCustomer" class="block text-gray-700 text-sm font-bold mb-2">Customer <span class="text-red-500">*</span></label>
                                <select id="opportunityCustomer" name="customer" required
                                    class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                                    <option value="">Select Customer</option>
                                    <!-- Options populated by JS -->
                                </select>
                            </div>
                            <div>
                                <label for="opportunityName" class="block text-gray-700 text-sm font-bold mb-2">Opportunity Name <span class="text-red-500">*</span></label>
                                <input type="text" id="opportunityName" name="opportunityName" placeholder="Wedding Photography Package" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="opportunityAmount" class="block text-gray-700 text-sm font-bold mb-2">Amount <span class="text-red-500">*</span></label>
                                    <div class="flex items-center">
                                        <span id="currencySymbolDisplay" class="text-xl font-semibold mr-2">$</span>
                                        <input type="number" id="opportunityAmount" name="amount" placeholder="5000.00" step="0.01" required
                                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                                    </div>
                                </div>
                                <div>
                                    <label for="opportunityCurrency" class="block text-gray-700 text-sm font-bold mb-2">Currency <span class="text-red-500">*</span></label>
                                    <select id="opportunityCurrency" name="currency" required
                                        class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                                        <option value="">Select Currency</option>
                                        <!-- Options populated by JS -->
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label for="opportunityStage" class="block text-gray-700 text-sm font-bold mb-2">Stage <span class="text-red-500">*</span></label>
                                <select id="opportunityStage" name="stage" required
                                    class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                                    <option value="">Select Stage</option>
                                    <option value="New Lead">New Lead</option>
                                    <option value="Qualification">Qualification</option>
                                    <option value="Proposal Sent">Proposal Sent</option>
                                    <option value="Negotiation">Negotiation</option>
                                    <option value="Closed Won">Closed Won</option>
                                    <option value="Closed Lost">Closed Lost</option>
                                </select>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label for="opportunityExpectedStartDate" class="block text-gray-700 text-sm font-bold mb-2">Expected Start Date <span class="text-red-500">*</span></label>
                                    <input type="date" id="opportunityExpectedStartDate" name="expectedStartDate" required
                                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="opportunityExpectedCloseDate" class="block text-gray-700 text-sm font-bold mb-2">Expected Close Date <span class="text-red-500">*</span></label>
                                    <input type="date" id="opportunityExpectedCloseDate" name="expectedCloseDate" required
                                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                                </div>
                            </div>
                            <div>
                                <label for="opportunityEventType" class="block text-gray-700 text-sm font-bold mb-2">Event Type <span class="text-red-500">*</span></label>
                                <select id="opportunityEventType" name="eventType" required
                                    class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                                    <option value="">Select Event Type</option>
                                    <option value="Wedding">Wedding</option>
                                    <option value="Corporate Event">Corporate Event</option>
                                    <option value="Portrait Session">Portrait Session</option>
                                    <option value="Product Shoot">Product Shoot</option>
                                    <option value="Other">Other</option>
                                </select>
                            </div>
                            <div>
                                <label for="opportunityEventLocationProposed" class="block text-gray-700 text-sm font-bold mb-2">Proposed Event Location <span class="text-red-500">*</span></label>
                                <input type="text" id="opportunityEventLocationProposed" name="eventLocationProposed" placeholder="Venue Name or City" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                            </div>
                            <div>
                                <label for="opportunityServiceAddress" class="block text-gray-700 text-sm font-bold mb-2">Service Address <span class="text-red-500">*</span></label>
                                <input type="text" id="opportunityServiceAddress" name="serviceAddress" placeholder="123 Main St, Anytown, CA 12345, USA" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                            </div>
                            <div>
                                <label for="opportunityDescription" class="block text-gray-700 text-sm font-bold mb-2">Description <span class="text-red-500">*</span></label>
                                <textarea id="opportunityDescription" name="description" rows="3" placeholder="Detailed description of the opportunity" required
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                            </div>
                            <div>
                                <label for="opportunityData" class="block text-gray-700 text-sm font-bold mb-2">Additional Opportunity Data (JSON)</label>
                                <textarea id="opportunityData" name="opportunityData" rows="3" placeholder='{"notes": "Follow up in 2 days", "priority": "High"}'
                                    class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                                <p class="text-xs text-gray-500 mt-1">Enter valid JSON data here.</p>
                            </div>
                            <div class="flex items-center justify-between">
                                <button type="submit" id="submitOpportunityButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                                    Add Opportunity
                                </button>
                                <button type="button" id="resetOpportunityFormButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                                    Clear Form
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- Opportunity List Card (always visible in left panel) -->
                    <div id="opportunity-existing-list-view" class="bg-white rounded-lg shadow p-6">
                        <h3 class="text-xl font-bold mb-4 text-gray-800">Existing Opportunities</h3>
                        <div class="data-grid-header grid grid-cols-[100px_minmax(120px,_1.5fr)_1fr_0.8fr_1fr_1.2fr_1.5fr_1.5fr_1fr] gap-x-4 py-2 border-b border-gray-200 font-semibold text-gray-600 text-sm">
                            <div class="px-2">Opportunity ID</div>
                            <div class="px-2">Name</div>
                            <div class="px-2">Customer</div>
                            <div class="px-2">Amount</div>
                            <div class="px-2">Stage</div>
                            <div class="px-2 hidden sm:block">Start Date</div>
                            <div class="px-2 hidden md:block">Close Date</div>
                            <div class="px-2 hidden lg:block">Event Type</div>
                            <div class="px-2 text-right">Actions</div>
                        </div>
                        <div id="opportunityList" class="data-grid-body divide-y divide-gray-100">
                            <!-- Opportunity rows will be loaded here by JavaScript -->
                            <p class="text-gray-500 text-center col-span-full py-4">No opportunities loaded.</p>
                        </div>
                    </div>
                </div> <!-- End Left Panel -->


                <!-- Right Panel (Linked Objects) -->
                <div id="opportunity-right-panel" class="md:w-2/5 md:flex-none hidden-panel">

                    <!-- Opportunity Summary Card (shows when right panel is expanded) -->
                    <div id="opportunity-summary-card" class="bg-white rounded-lg shadow p-6 mb-6 hidden">
                        <h3 class="text-xl font-bold mb-4 text-gray-800">Opportunity Summary</h3>
                        <div class="space-y-2">
                            <p class="text-gray-700"><span class="font-semibold">ID:</span> <span id="summaryOpportunityId"></span></p>
                            <p class="text-gray-700"><span class="font-semibold">Name:</span> <span id="summaryOpportunityName"></span></p>
                            <p class="text-gray-700"><span class="font-semibold">Customer:</span> <span id="summaryOpportunityCustomer"></span></p>
                            <p class="text-gray-700"><span class="font-semibold">Stage:</span> <span id="summaryOpportunityStage"></span></p>
                            <p class="text-gray-700"><span class="font-semibold">Amount:</span> <span id="summaryOpportunityAmount"></span></p>
                        </div>
                    </div>

                    <!-- Linked Objects Accordion -->
                    <div id="linkedObjectsAccordion" class="bg-white rounded-lg shadow hidden">
                        <h3 class="text-xl font-bold mb-4 text-gray-800 p-6 pb-0">Linked Objects</h3>

                        <!-- Contacts Accordion -->
                        <div class="accordion-item border-t border-gray-200">
                            <div class="accordion-header p-6 cursor-pointer flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition duration-150 ease-in-out">
                                <h4 class="text-lg font-semibold text-gray-800">Contacts</h4>
                                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                            <div class="accordion-content px-6 pb-6 overflow-hidden max-h-0 transition-all duration-300 ease-in-out">
                                <div class="py-4">
                                    <h5 class="text-md font-semibold mb-2">Add/Edit Contact</h5>
                                    <form id="opportunityContactForm" class="space-y-3">
                                        <div id="contactIdDisplayGroup" class="mb-2 hidden">
                                            <label class="block text-gray-700 text-xs font-bold mb-1">Contact ID (Read Only):</label>
                                            <p id="contactIdDisplay" class="text-sm font-semibold text-gray-900"></p>
                                        </div>
                                        <div>
                                            <label for="contactFirstName" class="block text-gray-700 text-xs font-bold mb-1">First Name <span class="text-red-500">*</span></label>
                                            <input type="text" id="contactFirstName" name="firstName" required placeholder="Contact First Name"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div>
                                            <label for="contactLastName" class="block text-gray-700 text-xs font-bold mb-1">Last Name <span class="text-red-500">*</span></label>
                                            <input type="text" id="contactLastName" name="lastName" required placeholder="Contact Last Name"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div>
                                            <label for="contactEmail" class="block text-gray-700 text-xs font-bold mb-1">Email <span class="text-red-500">*</span></label>
                                            <input type="email" id="contactEmail" name="email" required placeholder="contact@example.com"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div>
                                            <label for="contactPhone" class="block text-gray-700 text-xs font-bold mb-1">Phone <span class="text-red-500">*</span></label>
                                            <input type="tel" id="contactPhone" name="phone" required placeholder="+1 (555) 987-6543"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div>
                                            <label for="contactRole" class="block text-gray-700 text-xs font-bold mb-1">Role <span class="text-red-500">*</span></label>
                                            <input type="text" id="contactRole" name="role" required placeholder="Decision Maker, Influencer"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div class="flex justify-end space-x-2">
                                            <button type="submit" id="submitOpportunityContactButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-1 px-3 rounded text-sm transition duration-150 ease-in-out">Add Contact</button>
                                            <button type="button" id="resetOpportunityContactFormButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-3 rounded text-sm transition duration-150 ease-in-out">Clear</button>
                                        </div>
                                    </form>
                                </div>
                                <div class="py-4 border-t border-gray-200">
                                    <h5 class="text-md font-semibold mb-2">Opportunity Contacts</h5>
                                    <div class="data-grid-header grid grid-cols-[100px_1fr_1fr_1fr_1.2fr_1fr] gap-x-2 py-1 border-b border-gray-200 font-semibold text-gray-600 text-xs">
                                        <div class="px-1">Contact ID</div>
                                        <div class="px-1">Name</div>
                                        <div class="px-1">Email</div>
                                        <div class="px-1 hidden sm:block">Phone</div>
                                        <div class="px-1 hidden md:block">Role</div>
                                        <div class="px-1 text-right">Actions</div>
                                    </div>
                                    <div id="opportunityContactList" class="data-grid-body divide-y divide-gray-100 text-xs">
                                        <!-- Contacts loaded here -->
                                        <p class="text-gray-500 text-center col-span-full py-4">No contacts added for this opportunity.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Lines Accordion -->
                        <div class="accordion-item border-t border-gray-200">
                            <div class="accordion-header p-6 cursor-pointer flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition duration-150 ease-in-out">
                                <h4 class="text-lg font-semibold text-gray-800">Opportunity Lines</h4>
                                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                            <div class="accordion-content px-6 pb-6 overflow-hidden max-h-0 transition-all duration-300 ease-in-out">
                                <div class="py-4">
                                    <h5 class="text-md font-semibold mb-2">Add/Edit Line Item</h5>
                                    <form id="opportunityLineForm" class="space-y-3">
                                        <div id="optyLineIdDisplayGroup" class="mb-2 hidden">
                                            <label class="block text-gray-700 text-xs font-bold mb-1">Line ID (Read Only):</label>
                                            <p id="optyLineIdDisplay" class="text-sm font-semibold text-gray-900"></p>
                                        </div>
                                        <div>
                                            <label for="lineServiceDescription" class="block text-gray-700 text-xs font-bold mb-1">Service/Product Description <span class="text-red-500">*</span></label>
                                            <input type="text" id="lineServiceDescription" name="serviceDescription" required placeholder="Full Day Wedding Coverage"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div>
                                                <label for="lineUnitPrice" class="block text-gray-700 text-xs font-bold mb-1">Unit Price <span class="text-red-500">*</span></label>
                                                <input type="number" id="lineUnitPrice" name="unitPrice" required step="0.01" placeholder="2500.00"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                            <div>
                                                <label for="lineQuantity" class="block text-gray-700 text-xs font-bold mb-1">Quantity <span class="text-red-500">*</span></label>
                                                <input type="number" id="lineQuantity" name="quantity" required step="1" placeholder="1"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div>
                                                <label for="lineDiscount" class="block text-gray-700 text-xs font-bold mb-1">Discount (%)</label>
                                                <input type="number" id="lineDiscount" name="discount" step="0.01" placeholder="0.00"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                            <div>
                                                <label for="lineNetPrice" class="block text-gray-700 text-xs font-bold mb-1">Net Price (Calculated)</label>
                                                <input type="text" id="lineNetPrice" name="netPrice" readonly disabled placeholder="0.00"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm bg-gray-100">
                                            </div>
                                        </div>
                                        <div>
                                            <label for="lineStatus" class="block text-gray-700 text-xs font-bold mb-1">Status <span class="text-red-500">*</span></label>
                                            <select id="lineStatus" name="status" required
                                                class="shadow border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm bg-white">
                                                <option value="">Select Status</option>
                                                <option value="Proposed">Proposed</option>
                                                <option value="Accepted">Accepted</option>
                                                <option value="Rejected">Rejected</option>
                                                <option value="On Hold">On Hold</option>
                                            </select>
                                        </div>
                                        <div class="flex justify-end space-x-2">
                                            <button type="submit" id="submitOpportunityLineButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-1 px-3 rounded text-sm transition duration-150 ease-in-out">Add Line</button>
                                            <button type="button" id="resetOpportunityLineFormButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-3 rounded text-sm transition duration-150 ease-in-out">Clear</button>
                                        </div>
                                    </form>
                                </div>
                                <div class="py-4 border-t border-gray-200">
                                    <h5 class="text-md font-semibold mb-2">Opportunity Lines</h5>
                                    <div class="data-grid-header grid grid-cols-[100px_1.5fr_0.8fr_0.5fr_0.8fr_0.8fr_1fr] gap-x-2 py-1 border-b border-gray-200 font-semibold text-gray-600 text-xs">
                                        <div class="px-1">Line ID</div>
                                        <div class="px-1">Description</div>
                                        <div class="px-1">Unit Price</div>
                                        <div class="px-1">Qty</div>
                                        <div class="px-1">Disc.</div>
                                        <div class="px-1">Net Price</div>
                                        <div class="px-1 text-right">Actions</div>
                                    </div>
                                    <div id="opportunityLineList" class="data-grid-body divide-y divide-gray-100 text-xs">
                                        <!-- Lines loaded here -->
                                        <p class="text-gray-500 text-center col-span-full py-4">No opportunity lines added for this opportunity.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Quotes Accordion -->
                        <div class="accordion-item border-t border-gray-200">
                            <div class="accordion-header p-6 cursor-pointer flex justify-between items-center bg-gray-50 hover:bg-gray-100 transition duration-150 ease-in-out">
                                <h4 class="text-lg font-semibold text-gray-800">Quotes</h4>
                                <svg class="w-5 h-5 transform transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </div>
                            <div class="accordion-content px-6 pb-6 overflow-hidden max-h-0 transition-all duration-300 ease-in-out">
                                <div class="py-4">
                                    <h5 class="text-md font-semibold mb-2">Add/Edit Quote</h5>
                                    <form id="quoteForm" class="space-y-3">
                                        <div id="quoteIdDisplayGroup" class="mb-2 hidden">
                                            <label class="block text-gray-700 text-xs font-bold mb-1">Quote ID (Read Only):</label>
                                            <p id="quoteIdDisplay" class="text-sm font-semibold text-gray-900"></p>
                                        </div>
                                        <div>
                                            <label for="quoteName" class="block text-gray-700 text-xs font-bold mb-1">Quote Name <span class="text-red-500">*</span></label>
                                            <input type="text" id="quoteName" name="quoteName" required placeholder="Wedding Package Quote v1"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                        </div>
                                        <div>
                                            <label for="quoteDescription" class="block text-gray-700 text-xs font-bold mb-1">Description</label>
                                            <textarea id="quoteDescription" name="quoteDescription" rows="2" placeholder="Full package quote for John & Jane Doe wedding"
                                                class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm"></textarea>
                                        </div>
                                        <div>
                                            <label for="quoteCustomer" class="block text-gray-700 text-xs font-bold mb-1">Customer</label>
                                            <select id="quoteCustomer" name="customer" disabled
                                                class="shadow border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm bg-gray-100">
                                                <option value="">Auto-filled from Opportunity</option>
                                            </select>
                                        </div>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div>
                                                <label for="quoteStartDate" class="block text-gray-700 text-xs font-bold mb-1">Start Date <span class="text-red-500">*</span></label>
                                                <input type="date" id="quoteStartDate" name="startDate" required
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                            <div>
                                                <label for="quoteExpireDate" class="block text-gray-700 text-xs font-bold mb-1">Expire Date <span class="text-red-500">*</span></label>
                                                <input type="date" id="quoteExpireDate" name="expireDate" required
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                        </div>
                                        <div>
                                            <label for="quoteStatus" class="block text-gray-700 text-xs font-bold mb-1">Status <span class="text-red-500">*</span></label>
                                            <select id="quoteStatus" name="quoteStatus" required
                                                class="shadow border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm bg-white">
                                                <option value="">Select Status</option>
                                                <option value="Draft">Draft</option>
                                                <option value="Sent">Sent</option>
                                                <option value="Accepted">Accepted</option>
                                                <option value="Declined">Declined</option>
                                                <option value="Expired">Expired</option>
                                            </select>
                                        </div>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div>
                                                <label for="quoteNetListAmount" class="block text-gray-700 text-xs font-bold mb-1">Net List Amount</label>
                                                <input type="number" id="quoteNetListAmount" name="netListAmount" step="0.01" placeholder="5000.00"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                            <div>
                                                <label for="quoteNetDiscount" class="block text-gray-700 text-xs font-bold mb-1">Net Discount</label>
                                                <input type="number" id="quoteNetDiscount" name="netDiscount" step="0.01" placeholder="0.00"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm">
                                            </div>
                                        </div>
                                        <div class="grid grid-cols-2 gap-2">
                                            <div>
                                                <label for="quoteNetAmount" class="block text-gray-700 text-xs font-bold mb-1">Net Amount (Calculated)</label>
                                                <input type="text" id="quoteNetAmount" name="netAmount" readonly disabled placeholder="5000.00"
                                                    class="shadow appearance-none border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm bg-gray-100">
                                            </div>
                                            <div>
                                                <label for="quoteCurrency" class="block text-gray-700 text-xs font-bold mb-1">Currency <span class="text-red-500">*</span></label>
                                                <select id="quoteCurrency" name="currency" required
                                                    class="shadow border rounded w-full py-1 px-2 text-gray-700 leading-tight text-sm bg-white">
                                                    <option value="">Select Currency</option>
                                                    <!-- Options populated by JS via fetchCurrencies -->
                                                </select>
                                            </div>
                                        </div>
                                        <div class="flex items-center">
                                            <input type="checkbox" id="quoteIsFinal" name="isFinal" class="mr-2 leading-tight">
                                            <label for="quoteIsFinal" class="text-gray-700 text-sm">Is Final Version?</label>
                                        </div>
                                        <div class="flex justify-end space-x-2">
                                            <button type="submit" id="submitQuoteButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-1 px-3 rounded text-sm transition duration-150 ease-in-out">Add Quote</button>
                                            <button type="button" id="resetQuoteFormButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-1 px-3 rounded text-sm transition duration-150 ease-in-out">Clear</button>
                                        </div>
                                    </form>
                                </div>
                                <div class="py-4 border-t border-gray-200">
                                    <h5 class="text-md font-semibold mb-2">Quotes</h5>
                                    <div class="data-grid-header grid grid-cols-[100px_1.5fr_1fr_0.8fr_0.8fr_1fr] gap-x-2 py-1 border-b border-gray-200 font-semibold text-gray-600 text-xs">
                                        <div class="px-1">Quote ID</div>
                                        <div class="px-1">Name</div>
                                        <div class="px-1">Status</div>
                                        <div class="px-1">Amount</div>
                                        <div class="px-1 hidden sm:block">Expire Date</div>
                                        <div class="px-1 text-right">Actions</div>
                                    </div>
                                    <div id="quoteList" class="data-grid-body divide-y divide-gray-100 text-xs">
                                        <!-- Quotes loaded here -->
                                        <p class="text-gray-500 text-center col-span-full py-4">No quotes added for this opportunity.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div> <!-- End Linked Objects Accordion -->
                </div> <!-- End Right Panel -->
            </div>
        </section>

        <!-- Events Section -->
        <section id="events-section" class="hidden container mx-auto px-4">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Upcoming Events</h2>
            <p class="text-lg text-gray-600 mb-8">Manage your scheduled photography events here.</p>
            <div class="bg-white rounded-lg shadow p-6">
                <p class="text-gray-700">This section is under development. Event listing and management features will be added soon!</p>
            </div>
        </section>

        <!-- Admin Country Mapping Section -->
        <section id="admin-country-mapping-section" class="hidden container mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow p-6 mb-8 max-w-2xl mx-auto">
                <h2 class="text-2xl font-bold mb-4 text-gray-800">Admin: Country & State Mapping</h2>
                <form id="countryMappingForm" class="space-y-4">
                    <div>
                        <label for="adminCountriesInput" class="block text-gray-700 text-sm font-bold mb-2">Countries Data (CSV)</label>
                        <textarea id="adminCountriesInput" rows="5"
                            placeholder="Enter country data in CSV format, one country per line. Example:
United States,US
Canada,CA
Mexico,MX"
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                        <p class="text-xs text-gray-500 mt-1">Format: <code>CountryName,CountryCode</code></p>
                    </div>
                    <div>
                        <label for="adminCountryStateMapInput" class="block text-gray-700 text-sm font-bold mb-2">Country-State Map Data (CSV)</label>
                        <textarea id="adminCountryStateMapInput" rows="10"
                            placeholder="Enter country-state map data in CSV format, one country's states per line. Example:
US:California,Texas,New York
CA:Ontario,Quebec,British Columbia"
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                        <p class="text-xs text-gray-500 mt-1">Format: <code>CountryCode:State1,State2,State3</code></p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <label class="inline-flex items-center">
                            <input type="radio" name="loadType" id="fullLoad" value="full" class="form-radio" checked>
                            <span class="ml-2 text-gray-700">Full Load (Overwrite existing arrays, merge objects)</span>
                        </label>
                        <label class="inline-flex items-center">
                            <input type="radio" name="loadType" id="incrementalLoad" value="incremental" class="form-radio">
                            <span class="ml-2 text-gray-700">Incremental Load (Merge changes)</span>
                        </label>
                    </div>
                    <div class="flex items-center justify-between">
                        <button type="submit" id="uploadAdminDataButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                            Upload Data to Firestore
                        </button>
                    </div>
                </form>
                <div id="adminMessage" class="message hidden mt-4 text-sm px-4 py-3 rounded relative" role="alert"></div>
            </div>
        </section>

        <!-- Admin Currency Management Section -->
        <section id="currency-management-section" class="hidden container mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow p-6 mb-8 max-w-2xl mx-auto">
                <h2 id="currencyFormTitle" class="text-2xl font-bold mb-4 text-gray-800">Add New Currency</h2>

                <div id="currencyCodeDisplayGroup" class="mb-4 hidden">
                    <label class="block text-gray-700 text-sm font-bold mb-2">Currency Code (Read Only):</label>
                    <p id="currencyCodeDisplay" class="text-lg font-semibold text-gray-900"></p>
                </div>

                <form id="currencyForm" class="space-y-4">
                    <div>
                        <label for="adminCurrenciesInput" class="block text-gray-700 text-sm font-bold mb-2">Currencies Data (Comma-Separated Values):</label>
                        <textarea id="adminCurrenciesInput" rows="10"
                            placeholder="Enter currency data in CSV format, one currency per line.
Example:
USD,United States Dollar,$,$
EUR,Euro,€,€
GBP,British Pound,£,£"
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500"></textarea>
                        <p class="text-xs text-gray-500 mt-1">Format: <code>CurrencyCode,CurrencyName,Symbol,NativeSymbol</code>. No commas allowed within values.</p>
                    </div>
                    <div class="flex items-center justify-between">
                        <button type="submit" id="submitCurrencyButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                            Upload Currencies to Firestore
                        </button>
                    </div>
                </form>
                <div id="adminCurrencyMessage" class="message hidden mt-4 text-sm px-4 py-3 rounded relative" role="alert"></div>
            </div>

            <!-- Existing currencies list below for display and editing -->
            <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-xl font-bold mb-4 text-gray-800">Existing Currencies</h3>
                <div class="data-grid-header grid grid-cols-[0.8fr_1.5fr_0.8fr_0.8fr_1fr] gap-x-4 py-2 border-b border-gray-200 font-semibold text-gray-600 text-sm">
                    <div class="px-2">Code</div>
                    <div class="px-2">Name</div>
                    <div class="px-2">Symbol</div>
                    <div class="px-2">Native Symbol</div>
                    <div class="px-2 text-right">Actions</div>
                </div>
                <div id="currencyList" class="data-grid-body divide-y divide-gray-100">
                    <!-- Currencies will be loaded here by JavaScript -->
                    <p class="text-gray-500 text-center col-span-full py-4">No currencies loaded.</p>
                </div>
            </div>
        </section>

        <!-- Users Management Section -->
        <section id="users-management-section" class="hidden container mx-auto px-4 py-8">
            <div class="bg-white rounded-lg shadow p-6 mb-8 max-w-2xl mx-auto">
                <h2 id="userFormTitle" class="text-2xl font-bold mb-4 text-gray-800">Add New User Profile</h2>

                <div id="userIdDisplayGroup" class="mb-4">
                    <label for="userIdDisplayInput" class="block text-gray-700 text-sm font-bold mb-2">Firebase User ID (UID) <span class="text-red-500">*</span></label>
                    <input type="text" id="userIdDisplayInput" name="userId" placeholder="Firebase User UID (e.g., abc123def456)" required
                        class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    <p class="text-xs text-gray-500 mt-1">This ID must match the user's UID in Firebase Authentication. For new users, create them in Firebase Authentication first.</p>
                </div>

                <form id="userForm" class="space-y-4">
                    <div>
                        <label for="userName" class="block text-gray-700 text-sm font-bold mb-2">User Name (Gmail) <span class="text-red-500">*</span></label>
                        <input type="email" id="userName" name="userName" placeholder="user@gmail.com" required
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        <p class="text-xs text-gray-500 mt-1">Must be a valid Gmail address.</p>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="userFirstName" class="block text-gray-700 text-sm font-bold mb-2">First Name <span class="text-red-500">*</span></label>
                            <input type="text" id="userFirstName" name="firstName" placeholder="Jane" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        </div>
                        <div>
                            <label for="userLastName" class="block text-gray-700 text-sm font-bold mb-2">Last Name <span class="text-red-500">*</span></label>
                            <input type="text" id="userLastName" name="lastName" placeholder="Doe" required
                                class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        </div>
                    </div>
                    <div>
                        <label for="userEmail" class="block text-gray-700 text-sm font-bold mb-2">Contact Email <span class="text-red-500">*</span></label>
                        <input type="email" id="userEmail" name="email" placeholder="contact@example.com" required
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                        <p class="text-xs text-gray-500 mt-1">This is a contact email, not necessarily the login email.</p>
                    </div>
                    <div>
                        <label for="userPhone" class="block text-gray-700 text-sm font-bold mb-2">Phone <span class="text-red-500">*</span></label>
                        <input type="tel" id="userPhone" name="phone" placeholder="+1 (555) 111-2222" required
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>
                    <div>
                        <label for="userRole" class="block text-gray-700 text-sm font-bold mb-2">Role <span class="text-red-500">*</span></label>
                        <select id="userRole" name="role" required
                            class="shadow border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500 bg-white">
                            <option value="User">User</option>
                            <option value="Admin">Admin</option>
                        </select>
                    </div>
                    <div>
                        <label for="userSkills" class="block text-gray-700 text-sm font-bold mb-2">Skills (comma-separated) <span class="text-red-500">*</span></label>
                        <input type="text" id="userSkills" name="skills" placeholder="Photography, Editing, Sales" required
                            class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline focus:border-blue-500">
                    </div>
                    <div class="flex items-center justify-between">
                        <button type="submit" id="submitUserButton" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                            Create User Profile
                        </button>
                        <button type="button" id="resetUserFormButton" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded-md focus:outline-none focus:shadow-outline transition duration-150 ease-in-out">
                            Clear Form
                        </button>
                    </div>
                </form>
            </div>

            <!-- Existing Users List -->
            <div class="bg-white rounded-lg shadow p-6">
                <h3 class="text-xl font-bold mb-4 text-gray-800">Existing Users</h3>
                <div class="grid grid-cols-[100px_minmax(120px,_1.2fr)_1.5fr_1fr_1fr_1.5fr] gap-x-4 py-2 border-b border-gray-200 font-semibold text-gray-600 text-sm">
                    <div class="px-2">User ID</div>
                    <div class="px-2">User Name</div>
                    <div class="px-2">Email</div>
                    <div class="px-2 hidden sm:block">Role</div>
                    <div class="px-2 hidden md:block">Skills</div>
                    <div class="px-2 text-right">Actions</div>
                </div>
                <div id="userList" class="data-grid-body divide-y divide-gray-100">
                    <!-- User rows will be loaded here by JavaScript -->
                    <p class="text-gray-500 text-center col-span-full py-4">No users loaded.</p>
                </div>
            </div>
        </section>
    </main>

    <script type="module" src="js/script.js"></script>
</body>
</html>
