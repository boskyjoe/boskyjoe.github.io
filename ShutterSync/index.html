<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ShutterSync CRM</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h1 class="logo">ShutterSync CRM</h1>
            <nav class="main-nav">
                <button id="dashboardBtn" class="nav-button active" data-module="dashboard">Dashboard</button>
                <button id="customersBtn" class="nav-button" data-module="customers">Customers</button>
                <button id="opportunitiesBtn" class="nav-button" data-module="opportunities">Opportunities</button>
                <button id="adminBtn" class="nav-button admin-only" data-module="admin">Admin</button>
            </nav>
            <div class="user-info">
                <div id="userInfoDisplay" class="user-details">
                    <p>Welcome, <span id="userName">Guest</span>!</p>
                    <p>Role: <span id="userRole">N/A</span></p>
                </div>
                <button id="authButton" class="auth-button">Sign In with Google</button>
            </div>
        </aside>

        <main class="content-area">
            <section id="dashboardModule" class="module active">
                <h2>Dashboard</h2>
                <div class="dashboard-stats">
                    <div class="stat-card">
                        <h3>Total Customers</h3>
                        <p id="totalCustomersCount">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total Opportunities</h3>
                        <p id="totalOpportunitiesCount">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Open Opportunities</h3>
                        <p id="openOpportunitiesCount">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Won Opportunities</h3>
                        <p id="wonOpportunitiesCount">0</p>
                    </div>
                </div>
            </section>

            <section id="customersModule" class="module">
                <h2>Customers</h2>
                <button id="addCustomerBtn" class="add-button">Add New Customer</button>
                <div class="table-container">
                    <table id="customersTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th>Type</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="opportunitiesModule" class="module">
                <h2>Opportunities</h2>
                <button id="addOpportunityBtn" class="add-button">Add New Opportunity</button>
                <div class="table-container">
                    <table id="opportunitiesTable">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Customer</th>
                                <th>Stage</th>
                                <th>Value</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </section>

            <section id="adminModule" class="module admin-only">
                <h2>Admin Panel</h2>
                <div class="admin-sections">
                    <button class="admin-section-btn" data-admin-target="countriesStates">Countries & States</button>
                    <button class="admin-section-btn" data-admin-target="currencies">Currencies</button>
                    <button class="admin-section-btn" data-admin-target="priceBooks">Price Books</button>
                    <button class="admin-section-btn" data-admin-target="settings">App Settings</button>
                </div>

                <div id="countriesStatesSection" class="admin-subsection">
                    <h3>Manage Countries & States</h3>
                    <form id="countryStateForm" class="admin-form">
                        <input type="hidden" id="countryStateId">
                        <label for="countryName">Country Name:</label>
                        <input type="text" id="countryName" required>
                        <label for="countryCode">Country Code:</label>
                        <input type="text" id="countryCode" required>
                        <label for="countryStates">States (comma-separated):</label>
                        <input type="text" id="countryStates">
                        <button type="submit">Save Country</button>
                        <button type="button" class="cancel-edit-btn">Cancel</button>
                    </form>
                    <div class="table-container">
                        <table id="countriesStatesTable">
                            <thead>
                                <tr>
                                    <th>Country</th>
                                    <th>Code</th>
                                    <th>States</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="currenciesSection" class="admin-subsection">
                    <h3>Manage Currencies</h3>
                    <form id="currencyForm" class="admin-form">
                        <input type="hidden" id="currencyId">
                        <label for="currencyName">Currency Name:</label>
                        <input type="text" id="currencyName" required>
                        <label for="currencySymbol">Symbol:</label>
                        <input type="text" id="currencySymbol" required>
                        <button type="submit">Save Currency</button>
                        <button type="button" class="cancel-edit-btn">Cancel</button>
                    </form>
                    <div class="table-container">
                        <table id="currenciesTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Symbol</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="priceBooksSection" class="admin-subsection">
                    <h3>Manage Price Books</h3>
                    <form id="priceBookForm" class="admin-form">
                        <input type="hidden" id="priceBookId">
                        <label for="priceBookName">Price Book Name:</label>
                        <input type="text" id="priceBookName" required>
                        <label for="priceBookDescription">Description:</label>
                        <textarea id="priceBookDescription"></textarea>
                        <button type="submit">Save Price Book</button>
                        <button type="button" class="cancel-edit-btn">Cancel</button>
                    </form>
                    <div class="table-container">
                        <table id="priceBooksTable">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                </tbody>
                        </table>
                    </div>
                </div>

                <div id="settingsSection" class="admin-subsection">
                    <h3>App Settings</h3>
                    <form id="appSettingsForm" class="admin-form">
                        <input type="hidden" id="settingsDocId">
                        <label for="defaultCurrency">Default Currency (ID):</label>
                        <input type="text" id="defaultCurrency" placeholder="Enter Currency Document ID">
                        <label for="defaultCountry">Default Country (ID):</label>
                        <input type="text" id="defaultCountry" placeholder="Enter Country Document ID">
                        <button type="submit">Save Settings</button>
                        <button type="button" class="cancel-edit-btn">Cancel</button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <div id="customerModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="customerModalTitle">Add New Customer</h3>
            <form id="customerForm">
                <input type="hidden" id="customerId">
                <label for="customerType">Customer Type:</label>
                <select id="customerType" required>
                    <option value="">Select Type</option>
                    <option value="Individual">Individual</option>
                    <option value="Company">Company</option>
                </select>

                <label for="customerName">Customer Name:</label>
                <input type="text" id="customerName" required>

                <label for="customerEmail">Email:</label>
                <input type="email" id="customerEmail" required>

                <label for="customerPhone">Phone:</label>
                <input type="tel" id="customerPhone" required>

                <label for="customerAddress">Address:</label>
                <textarea id="customerAddress" rows="3"></textarea>

                <label for="customerCountry">Country:</label>
                <select id="customerCountry" required>
                    <option value="">Select Country</option>
                    </select>

                <label for="customerPreferredContactMethod">Preferred Contact Method:</label>
                <select id="customerPreferredContactMethod" required>
                    <option value="">Select Method</option>
                    <option value="Email">Email</option>
                    <option value="Phone">Phone</option>
                </select>

                <label for="customerIndustry">Industry:</label>
                <select id="customerIndustry" required>
                    <option value="">Select Industry</option>
                    <option value="Technology">Technology</option>
                    <option value="Finance">Finance</option>
                    <option value="Healthcare">Healthcare</option>
                    <option value="Retail">Retail</option>
                    <option value="Manufacturing">Manufacturing</option>
                    <option value="Education">Education</option>
                    <option value="Hospitality">Hospitality</option>
                    <option value="Other">Other</option>
                </select>

                <label for="customerAdditionalDetails">Additional Details:</label>
                <textarea id="customerAdditionalDetails" rows="3"></textarea>

                <label for="customerSource">Customer Source:</label>
                <select id="customerSource" required>
                    <option value="">Select Source</option>
                    <option value="Website">Website</option>
                    <option value="Referral">Referral</option>
                    <option value="Social Media">Social Media</option>
                    <option value="Advertisement">Advertisement</option>
                    <option value="Event">Event</option>
                    <option value="Word of Mouth">Word of Mouth</option>
                    <option value="Other">Other</option>
                </select>

                <label for="customerActive">Status:</label>
                <select id="customerActive" required>
                    <option value="Active">Active</option>
                    <option value="InActive">Inactive</option>
                </select>

                <button type="submit" id="saveCustomerBtn">Save Customer</button>
            </form>
        </div>
    </div>

    <div id="opportunityModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3 id="opportunityModalTitle">Add New Opportunity</h3>
            <form id="opportunityForm">
                <input type="hidden" id="opportunityId">
                <label for="opportunityName">Opportunity Name:</label>
                <input type="text" id="opportunityName" required>

                <label for="opportunityCustomer">Customer:</label>
                <select id="opportunityCustomer" required>
                    <option value="">Select Customer</option>
                    </select>

                <label for="opportunityCurrency">Currency:</label>
                <select id="opportunityCurrency" required>
                    <option value="">Select Currency</option>
                    </select>

                <label for="opportunityPriceBook">Price Book:</label>
                <select id="opportunityPriceBook" required>
                    <option value="">Select Price Book</option>
                    </select>

                <label for="opportunityExpectedStartDate">Expected Start Date:</label>
                <input type="date" id="opportunityExpectedStartDate" required>

                <label for="opportunityExpectedCloseDate">Expected Close Date:</label>
                <input type="date" id="opportunityExpectedCloseDate" required>

                <label for="opportunitySalesStage">Sales Stage:</label>
                <select id="opportunitySalesStage" required>
                    <option value="">Select Stage</option>
                    <option value="Prospect">Prospect</option>
                    <option value="Qualified">Qualified</option>
                    <option value="Proposal">Proposal</option>
                    <option value="Negotiation">Negotiation</option>
                    <option value="Won">Won</option>
                    <option value="Lost">Lost</option>
                </select>

                <label for="opportunityProbability">Probability (%):</label>
                <input type="number" id="opportunityProbability" min="0" max="100" required>

                <label for="opportunityValue">Value:</label>
                <input type="number" id="opportunityValue" min="0" required>

                <label for="opportunityNotes">Notes:</label>
                <textarea id="opportunityNotes" rows="3"></textarea>

                <button type="submit" id="saveOpportunityBtn">Save Opportunity</button>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
