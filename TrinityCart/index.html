<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Church Store Management</title>

    <!-- Google Sign-In Library -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>

    <!-- Tailwind CSS, ag-Grid CSS, Custom CSS (order is fine) -->
    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="stylesheet" href="css/style.css">
</head>

<body class="bg-gray-100 font-sans">

    <!-- ======================= -->
    <!--      HEADER / TITLE BAR -->
    <!-- ======================= -->
    <header class="bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-10">
        <div class="flex items-center space-x-4">
            <div class="h-12 w-12 rounded-full bg-[#4B5563] flex items-center justify-center">
                <span class="text-white font-bold text-xl">CS</span>
            </div>
            <div>
                <h1 class="text-xl font-bold text-gray-800">St. Mary's Festival Store</h1>
                <p class="text-sm text-gray-500">123 Church Lane, Anytown, USA</p>
            </div>
        </div>
        <nav class="flex items-center space-x-6">
            <a href="#" id="dashboard-link" class="text-gray-600 hover:text-blue-600 font-medium">My Dashboard</a>

            <!-- THE OLD BUTTON IS REPLACED BY THIS DIV -->
            <div id="auth-container">
                <!-- This is where the Google button will render -->
            </div>

            <!-- We will create a new logout button with JS when needed -->
        </nav>
    </header>

    <!-- ======================= -->
    <!--      MAIN CONTENT AREA  -->
    <!-- ======================= -->
    <main class="p-4 sm:p-8">
        <!-- View 1: Login Prompt (Default View) -->
        <div id="login-view" class="view text-center">
            <h2 class="text-2xl font-semibold mb-4">Welcome to the Store Management App</h2>
            <p class="text-gray-600">Please log in with your Google account to continue.</p>
        </div>

        <!-- View 2: Member Dashboard -->
        <div id="member-dashboard-view" class="view">
            <h2 class="text-2xl font-semibold mb-6">Member Dashboard</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                <button class="action-card bg-green-500">Checkout New Items</button>
                <button class="action-card bg-yellow-500">Report a Sale</button>
                <button class="action-card bg-red-500">Return Unsold Items</button>
            </div>
            <h3 class="text-xl font-semibold mb-4">My Current Items</h3>
            <div id="member-consignment-grid" class="ag-theme-alpine" style="height: 400px; width: 100%;"></div>
        </div>

        <!-- View 3: Admin Dashboard (Control Panel) -->
        <div id="admin-dashboard-view" class="view">
            <h2 class="text-2xl font-semibold mb-6">Admin Control Panel</h2>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

                <!-- Card 1: Manage Seasons -->
                <div id="admin-manage-seasons" class="admin-card">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 text-blue-600 mb-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0h18" />
                    </svg>
                    <h3 class="font-bold text-lg text-gray-800">Manage Seasons</h3>
                    <p class="text-sm text-gray-500 mt-1">Create & archive festival periods</p>
                </div>

                <!-- Card 2: Manage Vendors -->
                <div id="admin-manage-vendors" class="admin-card">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 text-blue-600 mb-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 0 1 3.375-3.375h9.75a3.375 3.375 0 0 1 3.375 3.375v1.875" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 13.5h6m-3-3v3" />
                    </svg>
                    <h3 class="font-bold text-lg text-gray-800">Manage Vendors</h3>
                    <p class="text-sm text-gray-500 mt-1">Add or edit supplier information</p>
                </div>

                <!-- Card 3: Manage Products -->
                <div id="admin-manage-products" class="admin-card">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 text-blue-600 mb-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z" />
                    </svg>
                    <h3 class="font-bold text-lg text-gray-800">Manage Products</h3>
                    <p class="text-sm text-gray-500 mt-1">Define items available for sale</p>
                </div>

                <!-- Card 4: Log New Delivery -->
                <div id="admin-log-delivery" class="admin-card">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 text-blue-600 mb-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 10.5v6m3-3H9m4.06-7.19-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z" />
                    </svg>
                    <h3 class="font-bold text-lg text-gray-800">Log New Delivery</h3>
                    <p class="text-sm text-gray-500 mt-1">Record new inventory from vendors</p>
                </div>

                <!-- Card 5: View Reports -->
                <div id="admin-view-reports" class="admin-card">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 text-blue-600 mb-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z" />
                    </svg>
                    <h3 class="font-bold text-lg text-gray-800">View Reports</h3>
                    <p class="text-sm text-gray-500 mt-1">Analyze sales and performance</p>
                </div>

                <!-- Card 6: Manage Users -->
                <div id="admin-manage-users" class="admin-card">
                    <!-- Icon -->
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-12 h-12 text-blue-600 mb-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-2.438c.155-.155.293-.31.428-.472M6.938 19.28a9.38 9.38 0 0 1-2.625-.372 9.337 9.337 0 0 1-4.121-2.438c-.155-.155-.293-.31-.428-.472M19.5 12c0 .434-.023.863-.068 1.285c-.045.422-.09.834-.14 1.235c-.05.402-.102.792-.158 1.172a6.321 6.321 0 0 1-.224.803a6.321 6.321 0 0 1-.41 1.053a6.321 6.321 0 0 1-.598.933a6.321 6.321 0 0 1-.78 1.053a6.321 6.321 0 0 1-1.053.78a6.321 6.321 0 0 1-1.235.598a6.321 6.321 0 0 1-1.172.41a6.321 6.321 0 0 1-1.053.224a6.321 6.321 0 0 1-.803.158a6.321 6.321 0 0 1-.472.14a6.321 6.321 0 0 1-.428.068a9.38 9.38 0 0 1-1.285-.068a6.321 6.321 0 0 1-.428-.14a6.321 6.321 0 0 1-.472-.158a6.321 6.321 0 0 1-.803-.224a6.321 6.321 0 0 1-1.053-.41a6.321 6.321 0 0 1-1.235-.598a6.321 6.321 0 0 1-1.172-.78a6.321 6.321 0 0 1-1.053-1.053a6.321 6.321 0 0 1-.78-1.172a6.321 6.321 0 0 1-.598-1.235a6.321 6.321 0 0 1-.41-1.053a6.321 6.321 0 0 1-.224-.803a6.321 6.321 0 0 1-.158-.472a6.321 6.321 0 0 1-.14-.428a6.321 6.321 0 0 1-.068-.472A9.38 9.38 0 0 1 4.5 12c0-.434.023-.863.068-1.285c.045-.422.09-.834.14-1.235c.05-.402.102-.792.158-1.172a6.321 6.321 0 0 1 .224-.803a6.321 6.321 0 0 1 .41-1.053a6.321 6.321 0 0 1 .598-.933a6.321 6.321 0 0 1 .78-1.053a6.321 6.321 0 0 1 1.053-.78a6.321 6.321 0 0 1 1.235-.598a6.321 6.321 0 0 1 1.172-.41a6.321 6.321 0 0 1 1.053-.224a6.321 6.321 0 0 1 .803-.158a6.321 6.321 0 0 1 .472-.14a6.321 6.321 0 0 1 .428-.068a9.38 9.38 0 0 1 1.285.068c.422.045.834.09 1.235.14c.402.05.792.102 1.172.158c.375.05.74.11.105.172c.315.06.62.128.915.205c.295.077.58.16.855.25c.275.09.54.188.795.293c.255.105.5.218.735.338c.235.12.46.248.675.383c.215.135.42.278.615.428c.195.15.38.308.555.473c.175.165.34.338.5.508c.16.17.31.348.45.533c.14.185.27.378.39.578c.12.2.23.408.33.623c.1.215.19.438.27.668c.08.23.15.468.21.713c.06.245.11.498.15.758c.04.26.07.528.09.803c.02.275.03.558.03.853Z" />
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 12a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" />
                    </svg>
                    <h3 class="font-bold text-lg text-gray-800">Manage Users</h3>
                    <p class="text-sm text-gray-500 mt-1">Assign roles to church members</p>
                </div>

            </div>
        </div>

        <!-- View 4: Admin Form Example (Manage Products) -->
        <div id="admin-manage-products-view" class="view">
            <a href="#" class="back-link">&larr; Back to Admin Dashboard</a>
            <h2 class="text-2xl font-semibold mb-4">Manage Products</h2>
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <h3 class="text-xl font-semibold mb-4">Add New Product</h3>
                <form class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" placeholder="Product Name (e.g., Christmas Cake Slice)" class="form-input">
                    <input type="number" placeholder="Selling Price" class="form-input">
                    <select class="form-input">
                        <option disabled selected>Select Source Item</option>
                    </select>
                    <input type="number" placeholder="Conversion Factor (e.g., 10)" class="form-input">
                    <button type="submit"
                        class="md:col-span-2 bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Save Product</button>
                </form>
            </div>
            <h3 class="text-xl font-semibold mb-4">Existing Products</h3>
            <div id="products-grid" class="ag-theme-alpine" style="height: 400px; width: 100%;"></div>
        </div>

        <!-- Add other admin views here as needed, following the same pattern -->

        <!-- View 5: Admin - Manage Vendors -->
        <div id="admin-manage-vendors-view" class="view">
            <a href="#" class="back-link">&larr; Back to Admin Dashboard</a>
            <h2 class="text-2xl font-semibold mb-4">Manage Vendors</h2>
            
            <!-- UPDATED Form to Add/Edit a Vendor -->
            <div class="bg-white p-6 rounded-lg shadow mb-6">
                <h3 id="vendor-form-title" class="text-xl font-semibold mb-4">Add New Vendor</h3>
                <form id="vendor-form" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="hidden" id="vendorId-input"> <!-- For updates -->
                    
                    <!-- Row 1 -->
                    <input type="text" id="vendorName-input" placeholder="Vendor Name" class="form-input" required>
                    <input type="text" id="address-input" placeholder="Address" class="form-input">
                    
                    <!-- Row 2 -->
                    <input type="tel" id="contactNo-input" placeholder="Contact No" class="form-input">
                    <input type="email" id="contactEmail-input" placeholder="Contact Email" class="form-input">

                    <!-- Row 3: Buttons -->
                    <div class="md:col-span-2 flex space-x-2">
                        <button type="submit" class="w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700">Save Vendor</button>
                        <button type="button" id="vendor-form-clear" class="w-full bg-gray-500 text-white p-2 rounded hover:bg-gray-600">Clear</button>
                    </div>
                </form>
            </div>

            <!-- Grid to Display Existing Vendors -->
            <h3 class="text-xl font-semibold mb-4">Existing Vendors</h3>
            <div id="vendors-grid" class="ag-theme-alpine" style="height: 400px; width: 100%;"></div>
        </div>



    </main>


    <!-- Our Application JS - LOADED AS A MODULE -->
    <script type="module" src="js/main.js"></script>

</body>

</html>
