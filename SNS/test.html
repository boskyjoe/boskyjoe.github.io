<!DOCTYPE html>
<html>
<head>
    <title>Handsontable Edit Test</title>
    <!-- Handsontable CSS and JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
</head>
<body>
    <h3>Handsontable Edit Test</h3>
    <p>Double-click a cell to edit. Press Enter or click away to finish. Check the console (F12).</p>

    <div id="example-table"></div>

    <script>
        const data = [
            ['Tesla', 2017, 'black', 'black'],
            ['Nissan', 2018, 'blue', 'blue'],
            ['Chrysler', 2019, 'yellow', 'black'],
            ['Volvo', 2020, 'white', 'gray']
        ];

        const container = document.getElementById('example-table');
        
        const hot = new Handsontable(container, {
            data: data,
            rowHeaders: true,
            colHeaders: ['Car', 'Year', 'Chassis color', 'Bumper color'],
            height: 'auto',
            licenseKey: 'non-commercial-and-evaluation', // Required for free use
            // This is the event listener for changes
            afterChange: function(changes, source) {
                // The 'source' check prevents infinite loops if you programmatically change data
                if (source === 'edit') {
                    console.log("SUCCESS: afterChange event fired!");
                    console.log("Changes array:", changes);
                    // changes is an array of [row, prop, oldValue, newValue]
                }
            }
        });
    </script>
</body>
</html>
